// ==UserScript==
// @name            GTweaks V2
// @namespace       Grifmin-GTweaks-V2
// @match           *://*shellshock.io/*
// @run-at          document-start
// @version         12.25.2025
// @author          Grifmin
// @description     A work in progress. (if you get this somehow, just know its not complete)
// @updateURL		https://raw.githubusercontent.com/Grifmin/egg_game/refs/heads/master/dist/userscript.inline.js
// @unwrap
// ==/UserScript==
"use strict";(()=>{var ke=Object.defineProperty;var Oe=(e,t)=>{for(var n in t)ke(e,n,{get:t[n],enumerable:!0})};var p={success:"background: #006700 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",warn:"background: #ff6d00 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",fail:"background: #FF0000 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",info:"background: #413C26 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",number:"color: #7E64FF ; padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;"},{log:qt,warn:Le,error:Ae,info:De,debug:Pe}=console;function y(e,...t){De(`%cG-Tweaks: %c${e}`,p.success,"",...t)}function $(e,...t){Ae(`%cG-Tweaks Error: %c${e}`,p.fail,"",...t)}function S(e,...t){Le(`%cG-Tweaks Warn: %c${e}`,p.warn,"",...t)}function _(e,...t){Pe(`%cG-Tweaks Debug: %c${e}`,p.warn,"",...t)}var X={aliases:{"star wars":{tags:["Eggwalker","Eggwalker2"],negate:[1127,1135,1319]},mario:{tags:["Kart"]},"among us":{tags:["AmongEgg"]}}};var{aliases:Z}=X;function Q(e,t,n){return t.filter(o=>(n.isCaseSensitive?o.name:o.name.toLowerCase()).includes(e))}function Fe(e,t,n){let o=Number(e);return t.filter(i=>i.id==o)}function je(e,t,n){return t.filter(o=>(n.isCaseSensitive?o.item_data.meshName:o.item_data.meshName?.toLowerCase())?.includes(e))}function Be(e,t){let n=[];if(t.tags){let{tags:o}=t,i=e.filter(r=>r.item_data.tags?.some(a=>o.includes(a)));n=n.concat(i)}else if(t.ids){let{ids:o}=t,i=e.filter(r=>o.includes(r.id));n=n.concat(i)}else if(t.names){let{names:o}=t,i=o.map(r=>Q(r,e,{isCaseSensitive:!0})).flat();n=n.concat(i)}if(t.negate){let{negate:o}=t;n=n.filter(i=>!o.includes(i.id))}return n}function qe(e,t,n){let o=[],i=d=>d.replace(/\s/g,""),r=Object.keys(Z).map(i);if(!r.some(d=>d.includes(e)))return y(`${e} not in`,r),[];let a=([d,l])=>[i(d),l],s=Object.entries(Z).map(a);for(let[d,l]of s){if(!d.includes(e))continue;let f=Be(t,l);o=o.concat(f)}return o}function Ne(e,t,n){return t.filter(o=>o.item_data.tags?.some(i=>(n.isCaseSensitive?i:i.toLowerCase()).includes(e)))}var Ge=[je,Q,qe,Fe,Ne],B=class{items;options;constructor(t,n){Object.assign(this,{items:t,options:n})}search(t){t=this.options.isCaseSensitive?t:t.toLowerCase();let n=Ge.map(i=>i(t,this.items,this.options)).flat(),o=[...new Set(n)];return Object.entries(o).map(([i,r])=>({item:r}))}},We=`This extension provides an alternative searching method for the inventory. 
Completely optional though. 
Feel free to request improvements for the alternative search extension!`,q,A;function Ue(){Object.defineProperty(window,"Fuse",{get(){return A?B:q},set(e){q=e},configurable:!0})}var Y=h({uniqueIdentifier:"Grifmin-AlternativeSearch",defaultSettings:{enabled:!1},author:"Grifmin",description:We,version:"1.0",name:"Alternative Search",init(){q=window.Fuse,A=this.settings.enabled,Ue()},config(){return this.settings,[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},onOptionsChange(e){if(_(`${this.name} - `,e,this.settings),e.label=="Enable"&&e.type=="Toggle"){let t=e.value;_(`${this.name} - updating state from ${this.settings.enabled} to ${e.value}`),this.settings.enabled=t,A=t}return A},isEnabled(){return this.settings.enabled}});var N={},T={get sourcemappings(){return N},src:"",Getter:()=>{throw new Error("Getter not defined yet.")},getMappings(e=N){function t(i){try{return T.Getter(i)}catch{return}}let n=Object.entries(e).map(([i,r])=>[i,t(r)]);return Object.fromEntries(n)}};function D(e){Object.assign(N,e)}function ee(e){try{Object.defineProperty(window,"ModLoader",{get:()=>e,configurable:!0})}catch(t){$("Error when attempting to define ModLoader on window",t)}}function te(){if("ModLoader"in window){let e=window.ModLoader,t=Object.entries(T).filter(([r,a])=>!e[r]),n=Object.fromEntries(t),o=Object.assign(n,window.ModLoader),i=new Error("ModLoader already defined on window object",{cause:window.ModLoader});return ee(o),$("%cWarning: ",p.warn,i)}ee(T)}var G={};Oe(G,{AdblockMod:()=>He,AntiAFKKick:()=>tt,ChallengesReRoll:()=>Ke,ChickenWinnerTryPlay:()=>Ve,ExcessiveLogsPatch:()=>Xe,StripObfuscatedCode:()=>Je,addChatRewrite:()=>Ze,exitSpectateModePatch:()=>et,onChatKeyDownRewrite:()=>Qe,setRespawnTimerMod:()=>Ye});async function x(e,t=250,n=45e3){let o=Date.now(),i;return new Promise((r,a)=>{i=setInterval(()=>{if(Date.now()-o>=n)return clearInterval(i),a(`Timed out, waited for - ${n}ms`);e()&&(clearInterval(i),r())},t)})}var k=class extends Error{};function ze(e,t,...n){function o(r){return r==null?"":r.replace(/\$/gm,"\\$").replace(".","\\.")}let i=t.map((r,a)=>r+o(n[a])).join("");return new RegExp(i,e)}var g={gm(e,...t){return ze("gm",e,...t)}};function c(e,t,n){let o=e.exec(t);if(!o)throw new k(n??`Error pattern matching with ${e}`,{cause:e});return o}var He={name:"Anti Adblock",description:"Has multiple little patches to assist with getting around adblocking measures.",version:"10.12.25",modify:function(e){g.gm`testing`;let t=c(/get productBlockAds\(\)\s?{return ([\.A-z0-9_$]+)}/gm,e,"Failed to grab productBlockAds"),[,n]=t,o=g.gm`(${n}=)`,i=/(console\.log\(`Mouse button \$\{\w\.button\} (?:up|down), Pointer Lock: \$\{!!document\.pointerLockElement\}`\))/gm;return e=e.replace(o,"$1true||$2").replace(i,"void 69 /*$1*/").replace(/(hideAds=)([A-z0-9_!]+)/gm,"$1true||$2").replace(/adBlockerDetected\(\){.*?}/gm,"adBlockerDetected(){}"),e}},Ke={name:"Challenges Re-Roll bypass",description:"Bypasses the challenges re-roll from checking the vip (isUpgraded) status of the user.",version:"8.30.25",modify:function(e){let t=/(isUpgraded\(\))(\?[\w_$]+\([\w_$]+,this\.rerollVipSuccess\.bind\(this)/gm;return e.replace(t,"$1||true$2")}},Ve={name:"Chicken Winner Play bypass",description:"Bypasses the chicken winner `chwTryPlay` function from checking the vip (isUpgraded) status of the user.",version:"10.12.25",modify:function(e){let t=/[\.A-z0-0_$]+\.isUpgraded\(\)(\?\([A-z09-9_$]+\("chwTryPlay\(\) VIP\. No ads for you!)/gm;return e.replace(t,"true$1")}},Je={name:"Strip Obfuscated Code",description:"This strips out the randomly obfuscated code that is in the game files",version:"10.12.25",modify:function(e){let t=/(var ([\w_$]+),([\w_$]+),([\w_$]+)=\[(?:"[\w=]+",){5}"[\w]+"\].*?};)/gm;e=e.replace(t,"/*$1*/");let n=/(new\(window\[.*?\].*?}\);)/gm;return e=e.replace(n,"/*$1*/"),e}},Xe={name:"Excessive Logs Patch",description:"Reduces some of the (in my opinion) excessive and annoyingh logging",version:"10.12.25",modify:function(e){return e=e.replace(/(setTimeout)(\(\(\(\)=>\([\w$_]+=null,console\.log\("%cSTOP!)/gm,"void/*$1*/ $2").replace(/(console\.log\("ACTIVE ZONE IS NOW.*?\))/gm,"void 0/*$1*/").replace(/(console\.log\("action",[\w$_]+\.name\|\|[\w$_]+\),)/gm,"/*$1*/"),e}},Ze={name:"addChat rewrite",description:`a re written version of the addChat function.
Display filtered messages, patches potential RCE bug (yes i reported it back in 1.15.2024)`,version:"10.31.25",modify:function(e){let t=/function ([\w$_]+)\(((?:[\w$_]+),?){5}\){const [\w$_]+=[\w$_]+\.querySelectorAll\("\.chat-item/gm,[,n]=c(t,e),o=g.gm`(function ${n}\\(([\\w_$]+),([\\w_$]+),([\\w_$]+),([\\w_$]+),([\\w_$]+)\\){.*?})function`,i=c(o,e,"Unable to grab addChat function name"),[,r,a,s,d,l,f]=i,[,m,b]=c(g.gm`([A-z0-9_$]+)=([A-z0-9_$]+)\\[${d}]`,r,"unable to get player, playerlist"),[,w]=c(/([A-z0-9_$]+)\.querySelectorAll\("\.chat-item"\)/,r),[,,v]=c(/([A-z0-9_$]+)\.length>0&&!([A-z0-9_$]+)\(\1\)/,r),[,C]=c(g.gm`([A-z0-9_$]+)\\(${m}\.social\\)`,r),[,M]=c(g.gm`([A-z0-9_$]+)\\.text\\[${m}\\.team\\]`,r),[,E]=c(g.gm`${d}===([A-z0-9_$]+)\\|\\|`,r),[,O]=c(/[\w$_]+&([\w$_\.]+|)&&\([\w$_]+\.classList\.add\(/gm,r,"Chatflags.pinned"),[,F]=c(/[\w$_]+&([\w$_\.]+)&&\(.\.style\.color=[\w$_]+\.text/gm,r,"Chatflags.team"),[,K]=c(/([A-z0-9_$]+)\.scrollTop=\1\.scrollHeight/,r),[,j]=c(/"clickme"\),([A-z0-9_$]+)\(([A-z0-9_$]+),([A-z0-9_$]+),([A-z0-9_$]+)\)/,r),[,L]=c(g.gm`([A-z0-9_$]+)\\.innerHTML=${a},${a}=`,r),[,V]=c(g.gm`=${m}\\.([\\w_$]+)`,r),[,J]=c(g.gm`[\\w$_]+!=([\\w$_]+)\.${V}`,r);D({addChat:n,me:J,isBadWord:v,teamColors:M,chatOutEl:w,players:b,meId:E});let _e=`function ${n} (message, flags, playerId, custom_click_callback, formatter) {  let chatItems = ${w}.querySelectorAll(".chat-item");  if (!message) {  /* this is scuffed, but this is accurate to the vanilla function...*/  if (!flags & ${O}) return;  for (let chat of chatItems) {  if (!chat.classList.contains("chat-pinned-item")) return;  chat.remove();  }  }  let chatItem = document.createElement("div");  let playerMsgSpan   = document.createElement("span");  let playerInfoDiv   = document.createElement("div");  let playerNameSpan  = document.createElement("span");  let socialIcon   = document.createElement("i");  let hasUpgrade   = false;  let SocialBadge  = false;  let uniqueId = false;  chatItem.classList.add("chat-item");  playerInfoDiv.style.display = "inline-block";  /* i dont like this if statement tbh, but i guess its fine for now. (replicate first, before modification)*/  if (playerId > 253) {  if (playerId == 255) {  playerNameSpan.textContent = "SERVER: ";  playerInfoDiv.style.color = "#ff0";  } else if (playerId == 254) {  playerNameSpan.textContent = "MOD: ";  playerInfoDiv.style.color = "#0f0";  }  playerNameSpan.classList.add("chat-player-name", "ss_marginright_xs");  playerInfoDiv.appendChild(playerNameSpan);  } else {  let player = ${b}[playerId];   /* here they are "purifying" the text to remove any <asdf>. but why innerHTML */  ${L}.innerHTML = message;  message = ${L}.textContent.trim();  const condition = ( playerId === ${E} || ((!(player?.muted ?? true) && message.length)) ); /* updated (better) condition*/  /*const condition = ( playerId === ${E} ||  (  playerId !== null &&   player &&   !player.muted &&   message.length > 0 &&   message.indexOf("<")   )  )*/  /* rewrite "condition" var as its not an actual declared variable? */  if (condition) {  /* hasUpgrade = !!(player.upgradeProductId && player.upgradeProductId > 0)  bruh */  hasUpgrade = (player?.upgradeProductId > 1);  SocialBadge = ${C}(player.social);  if (SocialBadge && !player.hideBadge) {  socialIcon.classList.add("fab", SOCIALMEDIA[SocialBadge.id]);  /*  should SOCIALMEDIA be dynamic? ^ it is a const in index.html*/  socialIcon.classList.add("ss_marginright_xs");  } else if (hasUpgrade && !player.hideBadge) {  socialIcon.classList.add("fas", "fa-egg", "hidden", "text_gold", "vip-egg");  socialIcon.classList.add("ss_marginright_xs");  }  uniqueId = player.${V};  playerNameSpan.classList.add("chat-player-name", "ss_marginright_xs");  playerNameSpan.textContent = player.name + ": ";  /* console.log(player.name, message); stawp it console logging :(*/  if (flags & ${F}) {  playerMsgSpan.style.color = ${M}.text[player.team];  playerMsgSpan.classList.add("chat-team");  }  playerInfoDiv.style.color = ${M}.text[player.team];  playerInfoDiv.appendChild(socialIcon);  playerInfoDiv.appendChild(playerNameSpan);  } else if (playerId !== null) {  return; /* this *should* never happen.*/  }  } /* playerMsgSpan.innerHTML = message; - disabling due to html injection concerns*/  playerMsgSpan.textContent = message;   if (playerId < 253 && ${v}(message)) {   playerMsgSpan.classList.add('addChatfiltered')   }  if (formatter) {  playerMsgSpan.innerHTML = playerMsgSpan.innerHTML.format(formatter)   /** this *does* re introduce the html injection concerns. however this should only ever be called internally (ie: share link popup)   * ^ this is neat. could be used for custom elements in html :eyes: maybe even :emoji:   */  }  if (flags & ${O}) {  playerMsgSpan.classList.add("chat-pinned");  chatItem.classList.add("chat-pinned-item");  }  chatItem.appendChild(playerInfoDiv);  chatItem.appendChild(playerMsgSpan);  chatItem.classList.add("clickme");  chatItem.onclick = () => {  if (!uniqueId && custom_click_callback) {  custom_click_callback();  /*} else if (playerId != ${J}.id) {*/   } else {  playerNameSpan.classList.add("clickme");  ${j}(uniqueId, SocialBadge, hasUpgrade)();  }  };  ${w}.appendChild(chatItem);   if (${w}) { ${w}.scroll({top: ${w}.scrollHeight});   }  }`;return e.replace(r,_e)}},Qe={name:"onChatKeyDown rewrite",description:"re writes the onChatKeyDown function to show when you are typing in a filtered message (hopefully)",version:"11.9.25",requiredMappings:["isBadWord","addChat"],modify:function(e,t){let{isBadWord:n,addChat:o}=t,i=/onChatKeyDown:(function\([\w$_]+\){.*?}),startChat:/gm,[,r]=c(i,e,"onChatKeyDown.toString()"),[,a,s]=c(/([\w$_]+)\.value=([\w$_]+)\(\1\.value,280/gm,r),d=/case"pin":return ([\w$_]+)\?([\w$_]+\.pinned|[\w$_]+):([\w$_]+(?:\.none)?)/gm,[,l,f,m]=c(d,r,"onChatKeyDown$chatFlags.pinned"),b=/\?([\w$_]+)\?([\w_$]+(?:\.team)?)/gm,[,w,v]=c(b,r,"onChatKeyDown.isTeamsMode"),[,C]=c(/([\w$_]+)\(\)}}/gm,r,"onChatKeyDown.stopChat"),[,M]=c(/"chat",([\w$_]+)\)\}/gm,r,"onChatKeyDown.chatEvents"),[,E]=c(/([\w$_]+)\.adminRoles/gm,r,"onChatKeyDown.clientPerms"),O=g.gm`([\\w$_]+)\\|\\|${o}\\([\\w$_]+,[\\w$_]+,([\\w$_]+)\\)`,[,F,K]=c(O,r),[,j]=c(/indexOf\("<"\)<0\){([\w$_]+)/gm,r,"sendMessageWS"),L=`function(event) { const { key } = (event || window.event); ${a}.value = ${s}(${a}.value, 280);  let text = ${a}.value.trim();  switch (key) { case "Enter": if ('' != text && text.indexOf('<') < 0) { ${j}(text); let addChatFlags = ((text) => { if (!text.startsWith('/')) return ${m}; const textArg1 = text.slice(1).split(' '); switch (key) { case 't': case 'team': return textArg1[1] ? ${w} ? ${v} : ${m} : null; case "p": case "pin": return ${f} ? ${l} : ${m}; default: return ${m}; } })(text);  if (addChatFlags != ${m}) { text = ((text) => { let textSplit = text.split(' '); return text.slice(textSplit[0].length + 1); })(text);  } if (!${F}) { ${o}(text, addChatFlags, ${K}); } if (${E}.adminRoles && !${f}) { player.chatLines++; if (player.chatLines > 2) { ${a}.style.visibility = 'hidden'; } }; ${M}++; if (${M} === 1) { /*ga('send', 'event', 'game', 'stats', 'chat', ${M});*/ } } case "Tab": event.preventDefault(); event.stopPropagation(); if (key != 'Tab') { ${C}(); }; } /*this is all my additions (fancy right) */ if (key.length == 1) { text += key; } else if (key == 'Backspace') { text = text.slice(0, text.length -1); } /*we defer a function to run nearly instantly after the function just incase we hit "enter" or something else happens idk */ setTimeout(() => { ${a}.style.color = ${n}(${a}.value) ? 'red' : ''; }, 1); ${a}.style.color = ${n}(text) ? 'red' : ''; }`.trim();return e.replace(r,L)}},Ye={name:"Respawn Timer mod",description:"Modifies the setRespawnTime() function to have some decimal places",version:"10.12.25",modify:function(e){let t=c(/function ([A-z0-9_$]+)\(([A-z0-9_$]+)\){([\w|$]+)=Math\.max\(\2,\3\).*?1200\)}/gm,e),[n,o,,i]=t;D({setRespawnTime:o});let r=c(/([\w_$]+)\.clear\(([\w_$]+)\),([\w_$]+)\(\),([\w_$]+)\(\)/gm,n),[,a,s,d,l]=r,f=c(g.gm`${i}<=0&&([A-z0-9_$]+)`,n),[,m]=f;D({setRespawnTime:o,respawnTime:i,respawnInterval:s,doMapOverviewCamera:l,interval:a,inGame:m});let w=`function ${o} (sec, decimals = 1, FATSec = 1200) {  ${i} = Math.max(sec, ${i});  /* ^ set the new respawntime (if needed)*/  if (${s}) clearInterval(${s});  /* vueApp.game.respawnTime = ${i}.toFixed(decimals); */  ${s} = setInterval(() => {  ${i} = Number((${i} - (1 / (decimals * 10))).toFixed(decimals));  /* vueApp.game.respawnTime = Math.min(${i}, 5); */  vueApp.game.respawnTime = ${i}.toFixed(decimals);  /* ^ shitty work around. for some reason it gets turned into a string?*/  if (${i} <= 0 && ${m}) {  ${i} = -1;  clearInterval(${s});  ${d}();  /* ^is this really needed? */  ${l}();  }  }, Math.floor(FATSec / (decimals * 10))); /* why is this 1.2sec instead of 1sec? */   }`;return(async()=>{await x(()=>vueApp?.$refs?.gameScreen);let v=vueApp.$refs.gameScreen,C=()=>!v.delayTheCracking&&!v.isRespawning?v.loc.ui_game_get_ready:v.delayTheCracking&&v.isRespawning?v.game.respawnTime:v.loc.p_pause_play;Object.defineProperty(vueApp.$refs.gameScreen,"playBtnText",{get:C})})(),e.replace(n,w)}},et={name:"exit SpectateMode patch",description:"This is my psudo attempt to patch out the exit spectator mode from setting the respawn time to 5 seconds",version:"9.1.25",requiredMappings:["me","setRespawnTime"],modify:function(e,t){let{me:n,setRespawnTime:o}=t,i=c(g.gm`respawn:function\\(\\)\\{return [\\w_$]+\\?\\(${n}\\.([\\w_$]+)=!0`,e,"Failed to grab playingState"),[,r]=i,a=g.gm`document\\.onpointerlockchange=function\\(\\){!document\\.pointerLockElement&&${n}&&([\\w_$]+)\\(\\)},`,s=c(a,e,"Failed to grab func name"),[,d]=s,l=g.gm`}\\(\\)}(function ${d}\\(\\)\\{.*?console\\.log\\("pausing game via pointerlock exit"\\),[\\w_$]+\\(\\),crazySdk\\.gameplayStop\\(\\)})`,f=c(l,e,"Failed to grab func src"),[,m]=f,b=m.replace(`${d}(){`,`${d}(){let wasIngame = ${n}.${r};/*console.log({wasIngame});*/`);return b=b.replace(o,`!wasIngame ? ${o}(0) : ${o}`),e.replace(m,b)}},tt={name:"Anti afk kick",description:"Prevents you from being kicked for being afk while ingame",version:"11.10.25",modify:function(e){let t=/(([\w$_]+)=([\w$_]+)\.set\(\((function\(\){var ([\w$_]+)=[\w$_]+\.getBuffer\(\);\5\.[\w$_]+\([\w$_\.]+\),\5\.send.*?)\),(?:15e3|15000)\))/gm,[,n,,,o]=c(t,e,"");e=e.replace(n,`void 69420/*${n}*/`);let i=`(()=>{ setInterval(() => { const ingameCondition = (vueApp?.ui?.game?.spectate || vueApp?.game?.isPaused) && vueApp?.game?.on; if (!ingameCondition) return;  (${o})();  }, 15_000) })()`,r=/(window\.extern)/gm;return e.replace(r,`${i};$1`)}};var nt=Object.values(G),it={name:"Basis Injection",description:"This is the kind of base line function that allows for all sorts of nifty things",modify:function(e){let t=/(window\.extern)/gm;return e.replace(t,"((/*GTweaks V2*/)=>ModLoader.Getter=(str)=>eval(str))();$1")}},ot={name:"Unsafe",description:"This just tests that the loader properly catches unsafe modifications to the source code",modify:function(e){return e.replace('"',"")}},I=[ot,it,...nt];function ie(e){I.push(e)}function oe(e){return e.requiredMappings?re(e)!=null:!0}function rt(e){try{return new Function(e)}catch(t){return t}}function re(e){let{requiredMappings:t}=e,{sourcemappings:n}=T,o=Object.entries(n);if(!t||o.length==0||!t.every(s=>n[s]))return;let r=Object.entries(n).filter(([s,d])=>t.includes(s));return Object.fromEntries(r)}function at(e,t){let n=re(e);try{let o=e.modify(t,n),i=rt(o);if(i instanceof Error)throw i;return o}catch(o){return o}}function W(e,t=I,n=0,o=t.length){let i=e,r=performance.now(),[a,s]=[t.filter(oe),t.filter(l=>!oe(l))];for(let l of a){let f=performance.now(),m=at(l,i),b=(performance.now()-f).toFixed(2);if(m instanceof Error){let w=`Loading sourcemod ${l.name} %c${b}%cms - `;$(w,p.number,"",m.message);continue}else if(!m){S(`Source Modification ${l.name} didnt return type string`,{result:m});continue}i=m,y(`Source Modification ${l.name} %c${b}%cms`,p.number,"")}if(s.length||n>0){if(n>=o||a.length==0){let l=`Unable to load ${s.length} Source mod${s.length==1?"":"s"}: `;return s.length!=0&&S(l,s.map(f=>f.name).join(", ")),i}i=W(i,s,n+1,o)}if(n>0)return i;let d=(performance.now()-r).toFixed(2);return y(`All Source Modifications completed in %c${d}%cms`,p.number,""),i}function st(e){return!!e.startsWith("(()=>{")}function ct(){let e=HTMLElement.prototype.appendChild;HTMLElement.prototype.appendChild=function(t){return t instanceof HTMLScriptElement&&st(t.innerHTML)&&(T.src=t.innerHTML,t.innerHTML=W(t.innerHTML),HTMLElement.prototype.appendChild=e),e.call(this,t)},te()}var dt=`Modifies the game's internal source code on load in.
Toggling mods not implemented as of yet. (as i cbf)`.trim(),ae=h({uniqueIdentifier:"Grifmin-SourceExtensions",iconUrl:"",name:"Source Extension Loader",author:"Grifmin",version:"0.1 alpha",description:dt,defaultSettings:{enabled:!0,modStates:{}},config(){let e=[{type:"Toggle",label:"Enable Game Modification",value:this.settings.enabled}];for(let t of I){let n={type:"Toggle",label:`${t.name} - toggle`,value:this.settings.modStates[t.name]??!0};e.push(n)}return e},init:function(){this.settings.enabled!=!1&&ct()},onOptionsChange(e){if(e.type!="Toggle")return!1;if(S(`${this.name} - window refresh request. - Grif fix this you lazy bastard.`),e.label=="Enable Game Modification")return this.settings.enabled=e.value,e.value;let t=I.find(n=>e.label?.includes(n.name));return t?(this.settings.modStates[t.name]=!1,e.value):!1},isEnabled(){return this.settings.enabled}});var lt=[IntersectionObserver,BroadcastChannel,RegExp,Object,Proxy,Function,Number,Boolean,Date],mt=[String];function ut(e){e?.prototype&&Object.freeze(e.prototype),Object.freeze(e)}var pt=e=>{let t={writable:!1,configurable:!1};for(let[n,o]of Object.entries(Object.getOwnPropertyDescriptors(e.prototype)))o.configurable&&Object.defineProperty(e.prototype,n,t)};function gt(){try{lt.forEach(ut),mt.forEach(pt)}catch(e){throw e instanceof TypeError&&console.log(e),e}}var ft="Protects various js Object prototypes. (useful when attempting to mitigate egg games various anti modding approaches)".trim(),se=h({uniqueIdentifier:"Grifmin-Protec",defaultSettings:{enabled:!0},author:"Grifmin",description:ft,version:"1.0",name:"Internal Protections",config(){return[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},init(){this.settings.enabled&&gt()},onOptionsChange(e){return e.type!="Toggle"?!1:(this.settings.enabled=e.value,S(`${this.name} - window refresh request. - Grif fix this you lazy bastard.`),e.value)},isEnabled(){return this.settings.enabled}});var ht="ThemeManager-div",P;async function ce(){if(P)return P;await x(()=>document.readyState=="complete");let e=document.createElement("div");return e.id=ht,document.body.append(e),P=e,P}var U={themes:{},addStyle:async function(e,t){if(typeof e=="string"){let n=e;e=document.createElement("style"),e.innerHTML=n,t&&(e.id=t)}return t||(t=e.id),document.body?((await ce()).append(e),this.themes[t]=e,e):(document.addEventListener("DOMContentLoaded",()=>{ce().then(n=>{n.append(e),this.themes[t]=e})},{once:!0}),e)}};var de=".firebaseID { visibility: hidden !important; display: none !important; opacity: 0 !important; }";var yt=Date.now(),u;function le(){return{thememanager:U,readyState:!1,extensions:[],addExtension(t){if(this.extensions.some(n=>n.uniqueIdentifier==t.uniqueIdentifier))return S(`duplicate Extension - ${t.uniqueIdentifier}`);t.id||(t.id=this.extensions.length),this.extensions.push(t)},get startTime(){return yt}}}function me(){try{Object.defineProperty(window,"Client",{get:()=>u,configurable:!0})}catch(e){$("Error when attempting to update Client definitions",e)}}function bt(){U.addStyle(de,"default-css")}function ue(){if("Client"in window){let t=window.Client,n=Object.entries(le()).filter(([r,a])=>!t[r]),o=Object.fromEntries(n);u=Object.assign(o,window.Client);let i=new Error("Client already exists on window object ",{cause:window.Client});return me(),S("%cError:",p.warn,i)}u=le();let e=new Date(u.startTime).toLocaleString();y(`Startup time: ${e}`),me(),bt()}var pe=".modmenu-screen { display: flex; justify-content: center; align-items: center; min-height: 100vh; } .modmenu-page-content { height: calc(100vh - 10em); width: 100%; border: var(--ss-common-border-width) solid var(--ss-blue5); background-color: var(--ss-blue6) !important; border-radius: .9375em; box-shadow: 0 .5em 1.5em rgba(0, 0, 0, 0.4); position: relative; overflow: hidden; } .modmenu-title { position: absolute; right: 50%; } .modmenu-header { padding: .5em; width: 100%; height: 20%; box-sizing: border-box; } .mod-screen-content { display: flex; height: 100%; overflow: hidden; } .mod-list { display: flex; flex: 0 0 30%; flex-direction: column; max-width: 30%; overflow-y: auto; overflow-x: hidden; max-height: 85%; border-radius: .5em; box-shadow: inset 0 -.5em .625em -.375em rgba(0, 0, 0, 0.4); gap: .25em; height: 80%; padding: .5em; } .mod-item { border-radius: .625em; border: var(--ss-common-border-width) solid var(--ss-blue5); display: flex; padding: .3125em; } .mod-item .mod-icon { flex-shrink: 0; } .mod-item:nth-child(odd) { background-color: var(--ss-blue3); } .mod-item:nth-child(even) { background-color: #77cbe6; } .mod-icon { width: 6em; height: 6em; margin-right: .5em; border-radius: .5em; } .mod-info .name { font-weight: bold; font-size: 1.2em; color: white; } .mod-info .author { font-weight: bold; font-size: 1em; margin-bottom: .3125em; color: #924eff; } .mod-info { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; } .mod-details { display: flex; flex: 1; flex-direction: column; padding: .5em; padding-bottom: 1.5em; max-height: 85%; height: 85%; overflow: hidden; } .mod-select-header { display: flex; align-items: center; gap: .625em; position: relative; } .mod-desc { flex: 1; font-size: 1em; line-height: 1.4; white-space: pre-line; border: red solid; border-radius: .25em; margin-top: .625em; padding: .625em; overflow-y: auto; } .mod-config { flex: 1; border: red solid; border-radius: .25em; margin-top: .625em; padding: .625em; overflow-y: auto; margin-bottom: 1em; } .mod-config-button { height: 2.125em; width: 9em; text-align: center; position: absolute; right: 0em; bottom: 0em; } .controls label { display: block; margin: .3125em 0; } @media (max-width: 37.5em) { .modmenu-page-content { max-width: 95%; padding: .625em; } .mod-item { flex-direction: column; align-items: stretch; } .mod-icon { align-self: center; margin-bottom: .625em; margin-right: 0; } }";var ge=`<div v-if="shouldDisplay" class="modmenu-screen"><div class="sidebar modmenu-page-content roundme_sm ss_marginright bg_blue6 common-box-shadow"><div class="modmenu-header bg_blue3"><header class="f_row align-items-center modmenu-title"><section><h1 class="text-shadow-black-40 text_white nospace">Mods</h1></section></header><aside class="'justify-self-end text-right">{{ mods.length }} mods</aside><input v-model="search" placeholder="Search Mods..." class="mod-menusearch ss_field" /></div><div class="mod-screen-content"><div  class="mod-list"><div class="mod-item" v-for="(mod, i) in filteredMods" :key="i" @click="selectMod(mod)"><div class="mod-icon":style="{ backgroundImage: mod.iconUrl ? mod.iconUrl : backupURL, backgroundSize: 'cover' }"aria-hidden="true"></div><div class="mod-info"><div class="name">{{ mod.name }}</div><div class="author">{{ mod.author }}</div></div></div></div><div class="mod-details" v-if="selectedMod"><div class="mod-meta"><header class="mod-select-header"><div class="mod-icon" :style="{ backgroundImage: selectedMod.iconUrl ? selectedMod.iconUrl : backupURL , backgroundSize: 'cover' }"aria-hidden="true"></div><div><h3> {{ selectedMod.name }}</h3><p><span class="author-text">Author: </span><span class="author">{{selectedMod.author}}</span></p><p v-if="selectedMod.version">Version: {{ selectedMod.version}}</p></div><aside><button class="mod-config-button ss_button" @click="configurationSelected()" > {{ configButtonText }} </button></aside></header></div><p v-if="desciptionScreen" class="mod-desc">{{ selectedMod.description }}</p><div v-if="!desciptionScreen" class="mod-config"><div v-for="(option, idx) in selectedMod.config()" :key="idx"><label>{{option.label ?? "Default Option(s)"}}<input type="checkbox" v-if="option.type == 'Toggle'" v-model="option.value" @change="onOptionsChange(option, idx)"><input type="range" v-if="option.type == 'Slider'" v-model.number="option.value" :min="option.min" :max="option.max" @change="onOptionsChange(option, idx)"><!-- <input type="text" v-if="option.type == 'Input'" ...> --><!-- todo: implement input box + add in slider increment --></label></div></div></div></div></div></div>`;var fe=5,he="Mod Menu";function wt(){this.showScreen=this.screens.modmenu,this.$refs.equipScreen.removeKeyboardStampPositionHandlers(),this.equip.displayAdHeaderRefresh=!0,this.hideGameMenu(),BAWK.play("ui_toggletab"),this.gameUiRemoveClassForNoScroll(),extern.resetPaperDoll()}function vt(){return!("vueApp"in window)||!("Vue"in window)?!1:[Vue,u.readyState,vueApp].every(e=>e)}function xt(){vueData.screens.modmenu||(Object.assign(vueApp,{switchToModMenuUi:wt}),vueData.screens.modmenu=fe,Object.assign(vueData.loc,{modmenu_title_screen:"mod menu"}),vueData.ui.mainMenu.push({locKey:"modmenu_title_screen",icon:"ico-settings",screen:5,mode:[],hideOn:[]}))}async function $t(){if(await x(vt).catch(i=>$(`ModMenu isReady - ${i}`)),u.vue)return y("It seems the Mod Menu Vue instance is already mounted. ");u.thememanager.addStyle(pe,"modmenu-css");let e=Vue.extend({template:ge,data(){let i=window?.Client.extensions;return{backupURL:"url('https://www.svgrepo.com/show/454209/gear-player-multimedia.svg')",search:"",selectedMod:i.find(r=>r.name==he),configuration:!1,mods:i}},computed:{refreshRequested(){return!1},shouldDisplay(){return vueApp.showScreen==fe},desciptionScreen(){return!this.configuration},configButtonText(){return this.configuration?"Description":"Configuration"},filteredMods(){let i=this.search.toLowerCase()??"";return this.mods.filter(r=>r.name?.toLowerCase().includes(i))}},methods:{selectMod(i){this.selectedMod=i,this.configuration=!1},configurationSelected(){this.configuration=!this.configuration},onSlider(i,r){y("onToggle",{slider:i,idx:r})},onOptionsChange(i,r){this.selectedMod&&this.selectedMod.onOptionsChange&&this.selectedMod.onOptionsChange(i)}}}),t=document.getElementById("mainScreens"),n=document.createElement("modmenu-root");n.id="#modmenu-root",t&&t.appendChild(n),xt();let o=new Vue({render:i=>i(e)}).$mount(n);Vue.mixin({created(){if(!("onMenuItemClick"in this&&typeof this.onMenuItemClick=="function"))return;let i=this.onMenuItemClick.bind(this);this.onMenuItemClick=(r,...a)=>{let s=this?.item?.screen,d=this?.screens?.modmenu;return s&&d&&s==d&&vueApp?.switchToModMenuUi(),i(r,...a)}}}),u.vue=o}var ye=h({uniqueIdentifier:"Grifmin-modmenu-v2",name:he,author:"Grifmin",version:"0.3a",description:`mod menu v2 implementation
Work in progress`,iconUrl:"url('https://media1.tenor.com/m/77rqMj3uomoAAAAd/gritito.gif)",defaultSettings:{},init:$t,config(){return[{type:"Toggle",label:"Test 1",value:!0},{type:"Toggle",label:"Test 2",value:!1},{type:"Slider",label:"Test slider",max:100,min:0,value:50}]},onOptionsChange(e){return _(`${this.name} - ${this.onOptionsChange?.name}: `,e),!1}});var R,z="comp_settings_control_binder",St="onKeyUp",be="Enable",Mt={name:"Stop Tab-Key from pausing",description:"The source mod thatgets rid of the the annoying tab key thing in egg game",modify(e){let n=/"Tab"==[\w$]+&&\(?[\w$]+="ESCAPE",[\w$]+\.preventDefault\(\)(,([\w$]+)\("down"\))/gm.exec(e);if(!n)throw new k("Failed to grab");let[,o]=n;e=e.replace(o,"/*$1*/");let r=/case(?:"|'|`)Tab(?:"|'|`):([\w$_]+)\.preventDefault\(\),\1\.stopPropagation\(\),((?:[\w$_]+)\(\))}/gm.exec(e);if(r){let[a,s,d]=r,l=`/*${d}// we need to exit, but i dont want to exit on 'tab' key */${s}.key != 'Tab' && ${d}`,f=a.replace(d,l);e=e.replace(a,f)}return e}};function Tt(e){e.stopPropagation();let{key:t}=e;t=="Escape"||t=="Enter"||(t==" "&&(t="space",e.preventDefault()),this.capture(t))}function It(){function e(t){t.key=="Tab"&&t.preventDefault()}document.addEventListener("keydown",e,!0)}function Ct(){function e(){R.methods[St]=Tt}z in window&&(R=window[z],e()),Object.defineProperty(window,z,{set:t=>{R=t,e()},get:()=>R})}var we=h({uniqueIdentifier:"Grifmin-Tabkeyremap",name:"Tab Key Remap",author:"Grifmin",version:"1.0",description:"Allows the use of the `Tab` key as any keybind, and prevents it from tabbing you out ingame",defaultSettings:{enabled:!1},config(){return[{type:"Toggle",label:be,value:this.settings.enabled}]},init(){this.settings.enabled&&(ie(Mt),Ct(),It())},onOptionsChange(e){return e.type!="Toggle"||e.label!=be?!1:(this.settings.enabled=e.value,!0)},isEnabled(){return this.settings.enabled}});var ve="#re-notification { background-color: rgba(0, 0, 0, 0.15) !important; border: 0.0625em solid rgba(0, 0, 0, 0.2) !important; box-shadow: 0 .25em .5em rgba(0, 0, 0, 0.2) !important; border-radius: 0.9375em !important; padding: 0.9375em !important; position: absolute; color: white; font-weight: bold; left: 75%; top: 1em; transform: translateX(-50%); display: none; text-align: left; } #re-notification img { width: 2em; height: 2em; margin-right: 0.75em; }";var xe='<div id="re-notification" class="roundedBorder"></div>    <!--<img src="/img/notificationIcon.png"> -->    <!-- <img src="/favicon192.png"> -->    <!--     ^ this is the closest image to the original    although, im not really a fan of it, so im going to remove it    -->    <div id="re-notificationMessage"></div></div>';var H=!1;function Et(e){let t=document.getElementById("re-notification");if(!t)return;let n=8,o=setInterval(()=>{t.style.opacity=`${n/8}`,t.style.top=n/2-3.5+"em",--n==0&&(clearInterval(o),t.style.display="none",e&&e())},32)}function _t(e,t){if(!H)return;let n=document.getElementById("re-notification");if(!n)return;n.style.opacity="0",n.style.top="-3.5em",n.style.display="flex",n.textContent=e;let o=0,i=setInterval(()=>{document.visibilityState!="hidden"&&(o++,n.style.opacity=`${o/8}`,n.style.top=o/2-3.5+"em",o==8&&(clearInterval(i),t&&setTimeout(Et,t)))},32)}async function kt(){await x(()=>u.readyState),u.thememanager.addStyle(ve,"re-notificaiton-css");let e=document.createElement("div");e.id="G-tweaks-html",e.innerHTML=xe,document.body.appendChild(e),Object.defineProperty(window,"notify",{get:()=>_t,configurable:!0})}var $e=h({uniqueIdentifier:"Grifmin-reNotification",defaultSettings:{enabled:!1},name:"Lobby Close Notifications",author:"Grifmin",version:"1.0",description:"adds back the original notifications for when a lobby is closing",config(){return[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},init:function(){H=this.settings.enabled,kt()},onOptionsChange(e){return e.type!="Toggle"||e.label!="Enable"?!1:(this.settings.enabled=e.value,H=this.settings.enabled,!0)},isEnabled(){return this.settings.enabled}});var Se;function Ot(){return"Vue"in window}function Lt(e){if(this.stat.kdr!==void 0&&typeof e!="number"&&typeof e[0]=="number")return this.kdr(e[0],e[1]);if(e&&typeof e!="number"){let[t,n]=e.map(o=>typeof o=="number"?o.toLocaleString():o);return`<div>${t}</div> <div>${n.toLocaleString()}</div>`}else return typeof e=="number"?e.toLocaleString():e}function At(){return this.hidePrice&&this.isItemOwned?this.loc.eq_owned:this.isItemOwned?this.loc.eq_owned+"!":this.item.price.toLocaleString()}async function Dt(){await x(Ot,50),Vue.mixin({created(){"setupStat"in this&&(this.setupStat=Lt)}})}function Pt(){function e(t){t.computed.itemPrice=At,Se=t}"comp_item"in window&&e(window.comp_item),Object.defineProperty(window,"comp_item",{set:e,get:()=>Se})}var Me=h({uniqueIdentifier:"Grifmin-ui_commas",defaultSettings:{enable:!1},author:"Grifmin",name:"Fancy commas",version:"1.0",description:"Adds commas to the stats (profile) page, currency, and shop items",config(){return[{type:"Toggle",label:"Enabled",value:this.settings.enable}]},init:function(){this.settings.enable&&(Pt(),Dt())},onOptionsChange(e){return e.label!="Enabled"||e.type!="Toggle"?!1:(this.settings.enable=e.value,!0)},isEnabled(){return!0}});function Te(e,t){let o=(()=>{let i=localStorage.getItem(e);return i?{...t,...JSON.parse(i)}:{...t}})();return new Proxy(o,{get(i,r){return o[r]},set(i,r,a){return o[r]=a,localStorage.setItem(e,JSON.stringify(o)),!0},deleteProperty(i,r){return delete o[r],localStorage.setItem(e,JSON.stringify(o)),!0}})}var Ie='.house-ad-wrapper, #respawn-ad-two, #respawn-ad-two, #welcome-bundle-ui, .welcome-bundle-ui { display: none !important; } img[src="img/eggstra-value-pack.webp"] { display: none !important; } .free-games-logo, .vip-club-cta, .free-games-title #chickenBadge { display: none !important; } .playerSlot--nam-score { border-radius: 0.5em; } .is-paused .pause-ui-element { left: 1em; } .is-paused .chat-item:first-child.chat-pinned-item { background-color: transparent !important; } .chat-container { display: grid; grid-template-rows: 1fr auto; background-color: rgba(0, 0, 0, 0.15) !important; border: 0.0625em solid rgba(0, 0, 0, 0.2) !important; box-shadow: 0 0.25em 0.5em rgba(0, 0, 0, 0.2) !important; border-radius: 0.9375em !important; padding: 0.9375em !important; scroll-behavior: smooth; max-height: 12.25em; } #chatOut { scrollbar-color: transparent transparent; overflow-y: auto; scroll-behavior: smooth; overflow: scroll; mask-image: linear-gradient( to bottom, transparent 0%, black 10%, black 15%, black 25%, black 85%, black 100% ); hyphens: auto; overflow-wrap: break-word; } #chatIn { position: sticky; overflow-y: auto; scroll-behavior: smooth; bottom: 0; } .is-paused #chatIn { width: 100%; left: 1em; } .is-paused .chat-container { display: grid !important; margin-left: unset; height: auto; } .is-paused #chatIn { position: sticky; } .chat-wrapper .pause-ui-element { bottom: var(--ss-space-lg) !important ; background-color: transparent !important; border: none !important; width: 30% !important; height: auto !important; } .is-paused .pause-ui-element { bottom: var(--ss-space-lg); background-color: transparent; border: none; width: 30%; height: auto !important; } .addChatfiltered { color: red; }';async function Ce(){await x(()=>u.readyState),u.thememanager.addStyle(Ie,"legacy-gtweaks-css")}var Rt=[se,Y,ae,ye,we,$e,Me];function Ft(e){return Te(e.uniqueIdentifier,e.defaultSettings)}function jt(e){try{return e.init(),!0}catch(t){return t}}function h(e){let t=Ft(e);return{...e,settings:t}}function Ee(){let e=performance.now();for(let i of Rt){let r=performance.now(),a=jt(i),s={processed:a==!0,loadTime:performance.now()-r};if(Object.assign(s,i),u.addExtension(s),!(a instanceof Error)){y(`Extension Loaded: ${s.uniqueIdentifier}`);continue}$(`Loading: %c${s.uniqueIdentifier} - ${a.message}`,a)}let t=(performance.now()-e).toFixed(2),o=`Loaded %c${u.extensions.filter(i=>i.processed==!0).length}%c/%c${u.extensions.length}%c extensions in %c${t}%cms successfully`;y(o,p.number,"",p.number,"",p.number,""),u.readyState=!0,Ce()}ue();Ee();})();
