// ==UserScript==
// @name            GTweaks V2
// @namespace       Grifmin-GTweaks-V2
// @match           *://*shellshock.io/*
// @run-at          document-start
// @version         11.18.2025
// @author          Grifmin
// @description     A work in progress. (if you get this somehow, just know its not complete)
// @updateURL		https://raw.githubusercontent.com/Grifmin/egg_game/refs/heads/master/dist/userscript.inline.js
// @unwrap
// ==/UserScript==
"use strict";(()=>{var _e=Object.defineProperty;var ke=(e,t)=>{for(var n in t)_e(e,n,{get:t[n],enumerable:!0})};var p={success:"background: #006700 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",warn:"background: #ff6d00 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",fail:"background: #FF0000 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",info:"background: #413C26 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",number:"color: #7E64FF ; padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;"},{log:qt,warn:Oe,error:Le,info:De,debug:Ae}=console;function b(e,...t){De(`%cG-Tweaks: %c${e}`,p.success,"",...t)}function x(e,...t){Le(`%cG-Tweaks Error: %c${e}`,p.fail,"",...t)}function $(e,...t){Oe(`%cG-Tweaks Warn: %c${e}`,p.warn,"",...t)}function _(e,...t){Ae(`%cG-Tweaks Debug: %c${e}`,p.warn,"",...t)}var V={aliases:{"star wars":{tags:["Eggwalker","Eggwalker2"],negate:[1127,1135,1319]},mario:{tags:["Kart"]},"among us":{tags:["AmongEgg"]}}};var{aliases:J}=V;function X(e,t,n){return t.filter(o=>(n.isCaseSensitive?o.name:o.name.toLowerCase()).includes(e))}function Re(e,t,n){let o=Number(e);return t.filter(i=>i.id==o)}function je(e,t,n){return t.filter(o=>(n.isCaseSensitive?o.item_data.meshName:o.item_data.meshName?.toLowerCase())?.includes(e))}function Be(e,t){let n=[];if(t.tags){let{tags:o}=t,i=e.filter(r=>r.item_data.tags?.some(a=>o.includes(a)));n=n.concat(i)}else if(t.ids){let{ids:o}=t,i=e.filter(r=>o.includes(r.id));n=n.concat(i)}else if(t.names){let{names:o}=t,i=o.map(r=>X(r,e,{isCaseSensitive:!0})).flat();n=n.concat(i)}if(t.negate){let{negate:o}=t;n=n.filter(i=>!o.includes(i.id))}return n}function Fe(e,t,n){let o=[],i=s=>s.replace(/\s/g,""),r=Object.keys(J).map(i);if(!r.some(s=>s.includes(e)))return b(`${e} not in`,r),[];let a=([s,l])=>[i(s),l],c=Object.entries(J).map(a);for(let[s,l]of c){if(!s.includes(e))continue;let f=Be(t,l);o=o.concat(f)}return o}function qe(e,t,n){return t.filter(o=>o.item_data.tags?.some(i=>(n.isCaseSensitive?i:i.toLowerCase()).includes(e)))}var Ne=[je,X,Fe,Re,qe],j=class{items;options;constructor(t,n){Object.assign(this,{items:t,options:n})}search(t){t=this.options.isCaseSensitive?t:t.toLowerCase();let n=Ne.map(i=>i(t,this.items,this.options)).flat(),o=[...new Set(n)];return Object.entries(o).map(([i,r])=>({item:r}))}},Ge=`This extension provides an alternative searching method for the inventory. 
Completely optional though. 
Feel free to request improvements for the alternative search extension!`,B,L;function We(){Object.defineProperty(window,"Fuse",{get(){return L?j:B},set(e){B=e},configurable:!0})}var Z=y({uniqueIdentifier:"Grifmin-AlternativeSearch",defaultSettings:{enabled:!1},author:"Grifmin",description:Ge,version:"1.0",name:"Alternative Search",init(){B=window.Fuse,L=this.settings.enabled,We()},config(){return this.settings,[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},onOptionsChange(e){if(_(`${this.name} - `,e,this.settings),e.label=="Enable"&&e.type=="Toggle"){let t=e.value;_(`${this.name} - updating state from ${this.settings.enabled} to ${e.value}`),this.settings.enabled=t,L=t}return L},isEnabled(){return this.settings.enabled}});var F={},M={get sourcemappings(){return F},src:"",Getter:()=>{throw new Error("Getter not defined yet.")},getMappings(e=F){function t(i){try{return M.Getter(i)}catch{return}}let n=Object.entries(e).map(([i,r])=>[i,t(r)]);return Object.fromEntries(n)}};function D(e){Object.assign(F,e)}function Q(e){try{Object.defineProperty(window,"ModLoader",{get:()=>e,configurable:!0})}catch(t){x("Error when attempting to define ModLoader on window",t)}}function Y(){if("ModLoader"in window){let e=window.ModLoader,t=Object.entries(M).filter(([r,a])=>!e[r]),n=Object.fromEntries(t),o=Object.assign(n,window.ModLoader),i=new Error("ModLoader already defined on window object",{cause:window.ModLoader});return Q(o),x("%cWarning: ",p.warn,i)}Q(M)}var q={};ke(q,{AdblockMod:()=>ze,AntiAFKKick:()=>et,ChallengesReRoll:()=>He,ChickenWinnerTryPlay:()=>Ke,ExcessiveLogsPatch:()=>Je,StripObfuscatedCode:()=>Ve,addChatRewrite:()=>Xe,exitSpectateModePatch:()=>Ye,onChatKeyDownRewrite:()=>Ze,setRespawnTimerMod:()=>Qe});async function S(e,t=250,n=45e3){let o=Date.now(),i;return new Promise((r,a)=>{i=setInterval(()=>{if(Date.now()-o>=n)return clearInterval(i),a(`Timed out, waited for - ${n}ms`);e()&&(clearInterval(i),r())},t)})}var k=class extends Error{};function Ue(e,t,...n){function o(r){return r==null?"":r.replace(/\$/gm,"\\$").replace(".","\\.")}let i=t.map((r,a)=>r+o(n[a])).join("");return new RegExp(i,e)}var g={gm(e,...t){return Ue("gm",e,...t)}};function d(e,t,n){let o=e.exec(t);if(!o)throw new k(n??`Error pattern matching with ${e}`,{cause:e});return o}var ze={name:"Anti Adblock",description:"Has multiple little patches to assist with getting around adblocking measures.",version:"10.12.25",modify:function(e){g.gm`testing`;let t=d(/get productBlockAds\(\)\s?{return ([\.A-z0-9_$]+)}/gm,e,"Failed to grab productBlockAds"),[,n]=t,o=g.gm`(${n}=)`,i=/(console\.log\(`Mouse button \$\{\w\.button\} (?:up|down), Pointer Lock: \$\{!!document\.pointerLockElement\}`\))/gm;return e=e.replace(o,"$1true||$2").replace(i,"void 69 /*$1*/").replace(/(hideAds=)([A-z0-9_!]+)/gm,"$1true||$2").replace(/adBlockerDetected\(\){.*?}/gm,"adBlockerDetected(){}"),e}},He={name:"Challenges Re-Roll bypass",description:"Bypasses the challenges re-roll from checking the vip (isUpgraded) status of the user.",version:"8.30.25",modify:function(e){let t=/(isUpgraded\(\))(\?[\w_$]+\([\w_$]+,this\.rerollVipSuccess\.bind\(this)/gm;return e.replace(t,"$1||true$2")}},Ke={name:"Chicken Winner Play bypass",description:"Bypasses the chicken winner `chwTryPlay` function from checking the vip (isUpgraded) status of the user.",version:"10.12.25",modify:function(e){let t=/[\.A-z0-0_$]+\.isUpgraded\(\)(\?\([A-z09-9_$]+\("chwTryPlay\(\) VIP\. No ads for you!)/gm;return e.replace(t,"true$1")}},Ve={name:"Strip Obfuscated Code",description:"This strips out the randomly obfuscated code that is in the game files",version:"10.12.25",modify:function(e){let t=/(var ([\w_$]+),([\w_$]+),([\w_$]+)=\[(?:"[\w=]+",){5}"[\w]+"\].*?};)/gm;e=e.replace(t,"/*$1*/");let n=/(new\(window\[.*?\].*?}\);)/gm;return e=e.replace(n,"/*$1*/"),e}},Je={name:"Excessive Logs Patch",description:"Reduces some of the (in my opinion) excessive and annoyingh logging",version:"10.12.25",modify:function(e){return e=e.replace(/(setTimeout)(\(\(\(\)=>\([\w$_]+=null,console\.log\("%cSTOP!)/gm,"void/*$1*/ $2").replace(/(console\.log\("ACTIVE ZONE IS NOW.*?\))/gm,"void 0/*$1*/").replace(/(console\.log\("action",[\w$_]+\.name\|\|[\w$_]+\),)/gm,"/*$1*/"),e}},Xe={name:"addChat rewrite",description:`a re written version of the addChat function.
Display filtered messages, patches potential RCE bug (yes i reported it back in 1.15.2024)`,version:"10.31.25",modify:function(e){let t=/function ([\w$_]+)\(((?:[\w$_]+),?){5}\){const [\w$_]+=[\w$_]+\.querySelectorAll\("\.chat-item/gm,[,n]=d(t,e),o=g.gm`(function ${n}\\(([\\w_$]+),([\\w_$]+),([\\w_$]+),([\\w_$]+),([\\w_$]+)\\){.*?})function`,i=d(o,e,"Unable to grab addChat function name"),[,r,a,c,s,l,f]=i,[,u,w]=d(g.gm`([A-z0-9_$]+)=([A-z0-9_$]+)\\[${s}]`,r,"unable to get player, playerlist"),[,h]=d(/([A-z0-9_$]+)\.querySelectorAll\("\.chat-item"\)/,r),[,,v]=d(/([A-z0-9_$]+)\.length>0&&!([A-z0-9_$]+)\(\1\)/,r),[,I]=d(g.gm`([A-z0-9_$]+)\\(${u}\.social\\)`,r),[,C]=d(g.gm`([A-z0-9_$]+)\\.text\\[${u}\\.team\\]`,r),[,E]=d(g.gm`${s}===([A-z0-9_$]+)\\|\\|`,r),[,O]=d(/[\w$_]+&([\w$_\.]+|)&&\([\w$_]+\.classList\.add\(/gm,r,"Chatflags.pinned"),[,R]=d(/[\w$_]+&([\w$_\.]+)&&\(.\.style\.color=[\w$_]+\.text/gm,r,"Chatflags.team"),[,Bt]=d(/([A-z0-9_$]+)\.scrollTop=\1\.scrollHeight/,r),[,Ce]=d(/"clickme"\),([A-z0-9_$]+)\(([A-z0-9_$]+),([A-z0-9_$]+),([A-z0-9_$]+)\)/,r),[,z]=d(g.gm`([A-z0-9_$]+)\\.innerHTML=${a},${a}=`,r),[,H]=d(g.gm`=${u}\\.([\\w_$]+)`,r),[,K]=d(g.gm`[\\w$_]+!=([\\w$_]+)\.${H}`,r);D({addChat:n,me:K,isBadWord:v,teamColors:C,chatOutEl:h,players:w,meId:E});let Ee=`function ${n} (message, flags, playerId, custom_click_callback, formatter) {  let chatItems = ${h}.querySelectorAll(".chat-item");  if (!message) {  /* this is scuffed, but this is accurate to the vanilla function...*/  if (!flags & ${O}) return;  for (let chat of chatItems) {  if (!chat.classList.contains("chat-pinned-item")) return;  chat.remove();  }  }  let chatItem = document.createElement("div");  let playerMsgSpan   = document.createElement("span");  let playerInfoDiv   = document.createElement("div");  let playerNameSpan  = document.createElement("span");  let socialIcon   = document.createElement("i");  let hasUpgrade   = false;  let SocialBadge  = false;  let uniqueId = false;  chatItem.classList.add("chat-item");  playerInfoDiv.style.display = "inline-block";  /* i dont like this if statement tbh, but i guess its fine for now. (replicate first, before modification)*/  if (playerId > 253) {  if (playerId == 255) {  playerNameSpan.textContent = "SERVER: ";  playerInfoDiv.style.color = "#ff0";  } else if (playerId == 254) {  playerNameSpan.textContent = "MOD: ";  playerInfoDiv.style.color = "#0f0";  }  playerNameSpan.classList.add("chat-player-name", "ss_marginright_xs");  playerInfoDiv.appendChild(playerNameSpan);  } else {  let player = ${w}[playerId];   /* here they are "purifying" the text to remove any <asdf>. but why innerHTML */  ${z}.innerHTML = message;  message = ${z}.textContent.trim();  const condition = ( playerId === ${E} || ((!(player?.muted ?? true) && message.length)) ); /* updated (better) condition*/  /*const condition = ( playerId === ${E} ||  (  playerId !== null &&   player &&   !player.muted &&   message.length > 0 &&   message.indexOf("<")   )  )*/  /* rewrite "condition" var as its not an actual declared variable? */  if (condition) {  /* hasUpgrade = !!(player.upgradeProductId && player.upgradeProductId > 0)  bruh */  hasUpgrade = (player?.upgradeProductId > 1);  SocialBadge = ${I}(player.social);  if (SocialBadge && !player.hideBadge) {  socialIcon.classList.add("fab", SOCIALMEDIA[SocialBadge.id]);  /*  should SOCIALMEDIA be dynamic? ^ it is a const in index.html*/  socialIcon.classList.add("ss_marginright_xs");  } else if (hasUpgrade && !player.hideBadge) {  socialIcon.classList.add("fas", "fa-egg", "hidden", "text_gold", "vip-egg");  socialIcon.classList.add("ss_marginright_xs");  }  uniqueId = player.${H};  playerNameSpan.classList.add("chat-player-name", "ss_marginright_xs");  playerNameSpan.textContent = player.name + ": ";  /* console.log(player.name, message); stawp it console logging :(*/  if (flags & ${R}) {  playerMsgSpan.style.color = ${C}.text[player.team];  playerMsgSpan.classList.add("chat-team");  }  playerInfoDiv.style.color = ${C}.text[player.team];  playerInfoDiv.appendChild(socialIcon);  playerInfoDiv.appendChild(playerNameSpan);  } else if (playerId !== null) {  return; /* this *should* never happen.*/  }  } /* playerMsgSpan.innerHTML = message; - disabling due to html injection concerns*/  playerMsgSpan.textContent = message;   if (playerId < 253 && ${v}(message)) {   playerMsgSpan.classList.add('addChatfiltered')   }  if (formatter) {  playerMsgSpan.innerHTML = playerMsgSpan.innerHTML.format(formatter)   /** this *does* re introduce the html injection concerns. however this should only ever be called internally (ie: share link popup)   * ^ this is neat. could be used for custom elements in html :eyes: maybe even :emoji:   */  }  if (flags & ${O}) {  playerMsgSpan.classList.add("chat-pinned");  chatItem.classList.add("chat-pinned-item");  }  chatItem.appendChild(playerInfoDiv);  chatItem.appendChild(playerMsgSpan);  chatItem.classList.add("clickme");  chatItem.onclick = () => {  if (!uniqueId && custom_click_callback) {  custom_click_callback();  /*} else if (playerId != ${K}.id) {*/   } else {  playerNameSpan.classList.add("clickme");  ${Ce}(uniqueId, SocialBadge, hasUpgrade)();  }  };  ${h}.appendChild(chatItem);   if (${h}) { ${h}.scroll({top: ${h}.scrollHeight});   }  }`;return e.replace(r,Ee)}},Ze={name:"onChatKeyDown rewrite",description:"re writes the onChatKeyDown function to show when you are typing in a filtered message (hopefully)",version:"11.9.25",requiredMappings:["isBadWord","addChat"],modify:function(e,t){let{isBadWord:n,addChat:o}=t,i=/onChatKeyDown:(function\([\w$_]+\){.*?}),startChat:/gm,[,r]=d(i,e,"onChatKeyDown.toString()"),[,a,c]=d(/([\w$_]+)\.value=([\w$_]+)\(\1\.value,280/gm,r),[,s,l]=d(/case"pin":return ([\w$_]+)\?([\w$_]+)\.pinned/gm,r),f=/\?([\w$_]+)\?/gm,[,u]=d(f,r,"onChatKeyDown.isTeamsMode"),[,w]=d(/([\w$_]+)\(\)}}/gm,r,"onChatKeyDown.stopChat"),[,h]=d(/"chat",([\w$_]+)\)\}/gm,r,"onChatKeyDown.chatEvents"),[,v]=d(/([\w$_]+)\.adminRoles/gm,r,"onChatKeyDown.clientPerms"),I=g.gm`([\\w$_]+)\\|\\|${o}\\([\\w$_]+,[\\w$_]+,([\\w$_]+)\\)`,[,C,E]=d(I,r),[,O]=d(/indexOf\("<"\)<0\){([\w$_]+)/gm,r,"sendMessageWS"),R=`function(event) { const { key } = (event || window.event); ${a}.value = ${c}(${a}.value, 280);  let text = ${a}.value.trim();  switch (key) { case "Enter": if ('' != text && text.indexOf('<') < 0) { ${O}(text); let addChatFlags = ((text) => { if (!text.startsWith('/')) return ${s}.none; const textArg1 = text.slice(1).split(' '); switch (key) { case 't': case 'team': return textArg1[1] ? ${u} ? ${s}.team : ${s}.none : null; case "p": case "pin": return ${l} ? ${s}.pinned : ${s}.none; default: return ${s}.none; } })(text);  if (addChatFlags != ${s}.none) { text = ((text) => { let textSplit = text.split(' '); return text.slice(textSplit[0].length + 1); })(text);  } if (!${C}) { ${o}(text, addChatFlags, ${E}); } if (${v}.adminRoles && !${l}) { player.chatLines++; if (player.chatLines > 2) { ${a}.style.visibility = 'hidden'; } }; ${h}++; if (${h} === 1) { /*ga('send', 'event', 'game', 'stats', 'chat', ${h});*/ } } case "Tab": event.preventDefault(); event.stopPropagation(); if (key != 'Tab') { ${w}(); }; } /*this is all my additions (fancy right) */ if (key.length == 1) { text += key; } else if (key == 'Backspace') { text = text.slice(0, text.length -1); } /*we defer a function to run nearly instantly after the function just incase we hit "enter" or something else happens idk */ setTimeout(() => { ${a}.style.color = ${n}(${a}.value) ? 'red' : ''; }, 1); ${a}.style.color = ${n}(text) ? 'red' : ''; }`.trim();return e.replace(r,R)}},Qe={name:"Respawn Timer mod",description:"Modifies the setRespawnTime() function to have some decimal places",version:"10.12.25",modify:function(e){let t=d(/function ([A-z0-9_$]+)\(([A-z0-9_$]+)\){([\w|$]+)=Math\.max\(\2,\3\).*?1200\)}/gm,e),[n,o,,i]=t;D({setRespawnTime:o});let r=d(/([\w_$]+)\.clear\(([\w_$]+)\),([\w_$]+)\(\),([\w_$]+)\(\)/gm,n),[,a,c,s,l]=r,f=d(g.gm`${i}<=0&&([A-z0-9_$]+)`,n),[,u]=f;D({setRespawnTime:o,respawnTime:i,respawnInterval:c,doMapOverviewCamera:l,interval:a,inGame:u});let h=`function ${o} (sec, decimals = 1, FATSec = 1200) {  ${i} = Math.max(sec, ${i});  /* ^ set the new respawntime (if needed)*/  if (${c}) clearInterval(${c});  /* vueApp.game.respawnTime = ${i}.toFixed(decimals); */  ${c} = setInterval(() => {  ${i} = Number((${i} - (1 / (decimals * 10))).toFixed(decimals));  /* vueApp.game.respawnTime = Math.min(${i}, 5); */  vueApp.game.respawnTime = ${i}.toFixed(decimals);  /* ^ shitty work around. for some reason it gets turned into a string?*/  if (${i} <= 0 && ${u}) {  ${i} = -1;  clearInterval(${c});  ${s}();  /* ^is this really needed? */  ${l}();  }  }, Math.floor(FATSec / (decimals * 10))); /* why is this 1.2sec instead of 1sec? */   }`;return(async()=>{await S(()=>vueApp?.$refs?.gameScreen);let v=vueApp.$refs.gameScreen,I=()=>!v.delayTheCracking&&!v.isRespawning?v.loc.ui_game_get_ready:v.delayTheCracking&&v.isRespawning?v.game.respawnTime:v.loc.p_pause_play;Object.defineProperty(vueApp.$refs.gameScreen,"playBtnText",{get:I})})(),e.replace(n,h)}},Ye={name:"exit SpectateMode patch",description:"This is my psudo attempt to patch out the exit spectator mode from setting the respawn time to 5 seconds",version:"9.1.25",requiredMappings:["me","setRespawnTime"],modify:function(e,t){let{me:n,setRespawnTime:o}=t,i=d(g.gm`respawn:function\\(\\)\\{return [\\w_$]+\\?\\(${n}\\.([\\w_$]+)=!0`,e,"Failed to grab playingState"),[,r]=i,a=g.gm`document\\.onpointerlockchange=function\\(\\){!document\\.pointerLockElement&&${n}&&([\\w_$]+)\\(\\)},`,c=d(a,e,"Failed to grab func name"),[,s]=c,l=g.gm`}\\(\\)}(function ${s}\\(\\)\\{.*?console\\.log\\("pausing game via pointerlock exit"\\),[\\w_$]+\\(\\),crazySdk\\.gameplayStop\\(\\)})`,f=d(l,e,"Failed to grab func src"),[,u]=f,w=u.replace(`${s}(){`,`${s}(){let wasIngame = ${n}.${r};/*console.log({wasIngame});*/`);return w=w.replace(o,`!wasIngame ? ${o}(0) : ${o}`),e.replace(u,w)}},et={name:"Anti afk kick",description:"Prevents you from being kicked for being afk while ingame",version:"11.10.25",modify:function(e){let t=/(([\w$_]+)=([\w$_]+)\.set\(\((function\(\){var ([\w$_]+)=[\w$_]+\.getBuffer\(\);\5\.[\w$_]+\([\w$_\.]+\),\5\.send.*?)\),(?:15e3|15000)\))/gm,[,n,,,o]=d(t,e,"");e=e.replace(n,`void 69420/*${n}*/`);let i=`(()=>{ setInterval(() => { const ingameCondition = (vueApp?.ui?.game?.spectate || vueApp?.game?.isPaused) && vueApp?.game?.on; if (!ingameCondition) return;  (${o})();  }, 15_000) })()`,r=/(window\.extern)/gm;return e.replace(r,`${i};$1`)}};var tt=Object.values(q),nt={name:"Basis Injection",description:"This is the kind of base line function that allows for all sorts of nifty things",modify:function(e){let t=/(window\.extern)/gm;return e.replace(t,"((/*GTweaks V2*/)=>ModLoader.Getter=(str)=>eval(str))();$1")}},it={name:"Unsafe",description:"This just tests that the loader properly catches unsafe modifications to the source code",modify:function(e){return e.replace('"',"")}},T=[it,nt,...tt];function te(e){T.push(e)}function ne(e){return e.requiredMappings?ie(e)!=null:!0}function ot(e){try{return new Function(e)}catch(t){return t}}function ie(e){let{requiredMappings:t}=e,{sourcemappings:n}=M,o=Object.entries(n);if(!t||o.length==0||!t.every(c=>n[c]))return;let r=Object.entries(n).filter(([c,s])=>t.includes(c));return Object.fromEntries(r)}function rt(e,t){let n=ie(e);try{let o=e.modify(t,n),i=ot(o);if(i instanceof Error)throw i;return o}catch(o){return o}}function N(e,t=T,n=0,o=t.length){let i=e,r=performance.now(),[a,c]=[t.filter(ne),t.filter(l=>!ne(l))];for(let l of a){let f=performance.now(),u=rt(l,i),w=performance.now()-f;if(u instanceof Error){let h=`Loading sourcemod ${l.name} %c${w}%cms - `;x(h,p.number,"",u.message);continue}else if(!u){$(`Source Modification ${l.name} didnt return type string`,{result:u});continue}i=u,b(`Source Modification ${l.name} %c${w}%cms`,p.number,"")}if(c.length||n>0){if(n>=o||a.length==0){let l=`Unable to load ${c.length} Source mod${c.length==1?"":"s"}: `;return c.length!=0&&$(l,c.map(f=>f.name).join(", ")),i}i=N(i,c,n+1,o)}if(n>0)return i;let s=performance.now()-r;return b(`All Source Modifications completed in %c${s}%cms`,p.number,""),i}function at(e){return!!e.startsWith("(()=>{")}function st(){let e=HTMLElement.prototype.appendChild;HTMLElement.prototype.appendChild=function(t){return t instanceof HTMLScriptElement&&at(t.innerHTML)&&(M.src=t.innerHTML,t.innerHTML=N(t.innerHTML),HTMLElement.prototype.appendChild=e),e.call(this,t)},Y()}var ct=`Modifies the game's internal source code on load in.
Toggling mods not implemented as of yet. (as i cbf)`.trim(),oe=y({uniqueIdentifier:"Grifmin-SourceExtensions",iconUrl:"",name:"Source Extension Loader",author:"Grifmin",version:"0.1 alpha",description:ct,defaultSettings:{enabled:!0,modStates:{}},config(){let e=[{type:"Toggle",label:"Enable Game Modification",value:this.settings.enabled}];for(let t of T){let n={type:"Toggle",label:`${t.name} - toggle`,value:this.settings.modStates[t.name]??!0};e.push(n)}return e},init:function(){this.settings.enabled!=!1&&st()},onOptionsChange(e){if(e.type!="Toggle")return!1;if($(`${this.name} - window refresh request. - Grif fix this you lazy bastard.`),e.label=="Enable Game Modification")return this.settings.enabled=e.value,e.value;let t=T.find(n=>e.label?.includes(n.name));return t?(this.settings.modStates[t.name]=!1,e.value):!1},isEnabled(){return this.settings.enabled}});var dt=[IntersectionObserver,BroadcastChannel,RegExp,Object,Proxy,Function,Number,Boolean,Date],lt=[String];function mt(e){e?.prototype&&Object.freeze(e.prototype),Object.freeze(e)}var ut=e=>{let t={writable:!1,configurable:!1};for(let[n,o]of Object.entries(Object.getOwnPropertyDescriptors(e.prototype)))o.configurable&&Object.defineProperty(e.prototype,n,t)};function pt(){try{dt.forEach(mt),lt.forEach(ut)}catch(e){throw e instanceof TypeError&&console.log(e),e}}var gt="Protects various js Object prototypes. (useful when attempting to mitigate egg games various anti modding approaches)".trim(),re=y({uniqueIdentifier:"Grifmin-Protec",defaultSettings:{enabled:!0},author:"Grifmin",description:gt,version:"1.0",name:"Internal Protections",config(){return[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},init(){this.settings.enabled&&pt()},onOptionsChange(e){return e.type!="Toggle"?!1:(this.settings.enabled=e.value,$(`${this.name} - window refresh request. - Grif fix this you lazy bastard.`),e.value)},isEnabled(){return this.settings.enabled}});var ft="ThemeManager-div",A;function ae(){if(A)return A;let e=document.createElement("div");return e.id=ft,document.body.append(e),A=e,A}var G={themes:{},addStyle:function(e,t){if(typeof e=="string"){let n=e;e=document.createElement("style"),e.innerHTML=n,t&&(e.id=t)}return t||(t=e.id),document.body?(ae().append(e),this.themes[t]=e,e):(document.addEventListener("DOMContentLoaded",()=>{ae().append(e),this.themes[t]=e},{once:!0}),e)}};var se=".firebaseID { visibility: hidden !important; display: none !important; opacity: 0 !important; }";var ht=Date.now(),m;function ce(){return{thememanager:G,readyState:!1,extensions:[],addExtension(t){if(this.extensions.some(n=>n.uniqueIdentifier==t.uniqueIdentifier))return $(`duplicate Extension - ${t.uniqueIdentifier}`);t.id||(t.id=this.extensions.length),this.extensions.push(t)},get startTime(){return ht}}}function de(){try{Object.defineProperty(window,"Client",{get:()=>m,configurable:!0})}catch(e){x("Error when attempting to update Client definitions",e)}}function yt(){G.addStyle(se,"default-css")}function le(){if("Client"in window){let t=window.Client,n=Object.entries(ce()).filter(([r,a])=>!t[r]),o=Object.fromEntries(n);m=Object.assign(o,window.Client);let i=new Error("Client already exists on window object ",{cause:window.Client});return de(),$("%cError:",p.warn,i)}m=ce();let e=new Date(m.startTime).toLocaleString();b(`Startup time: ${e}`),de(),yt()}var me=".modmenu-screen { display: flex; justify-content: center; align-items: center; min-height: 100vh; } .modmenu-page-content { height: calc(100vh - 10em); width: 100%; border: var(--ss-common-border-width) solid var(--ss-blue5); background-color: var(--ss-blue6) !important; border-radius: .9375em; box-shadow: 0 .5em 1.5em rgba(0, 0, 0, 0.4); position: relative; overflow: hidden; } .modmenu-title { position: absolute; right: 50%; } .modmenu-header { padding: .5em; width: 100%; height: 20%; box-sizing: border-box; } .mod-screen-content { display: flex; height: 100%; overflow: hidden; } .mod-list { display: flex; flex: 0 0 30%; flex-direction: column; max-width: 30%; overflow-y: auto; overflow-x: hidden; max-height: 85%; border-radius: .5em; box-shadow: inset 0 -.5em .625em -.375em rgba(0, 0, 0, 0.4); gap: .25em; height: 80%; padding: .5em; } .mod-item { border-radius: .625em; border: var(--ss-common-border-width) solid var(--ss-blue5); display: flex; padding: .3125em; } .mod-item .mod-icon { flex-shrink: 0; } .mod-item:nth-child(odd) { background-color: var(--ss-blue3); } .mod-item:nth-child(even) { background-color: #77cbe6; } .mod-icon { width: 6em; height: 6em; margin-right: .5em; border-radius: .5em; } .mod-info .name { font-weight: bold; font-size: 1.2em; color: white; } .mod-info .author { font-weight: bold; font-size: 1em; margin-bottom: .3125em; color: #924eff; } .mod-info { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; } .mod-details { display: flex; flex: 1; flex-direction: column; padding: .5em; padding-bottom: 1.5em; max-height: 85%; height: 85%; overflow: hidden; } .mod-select-header { display: flex; align-items: center; gap: .625em; position: relative; } .mod-desc { flex: 1; font-size: 1em; line-height: 1.4; white-space: pre-line; border: red solid; border-radius: .25em; margin-top: .625em; padding: .625em; overflow-y: auto; } .mod-config { flex: 1; border: red solid; border-radius: .25em; margin-top: .625em; padding: .625em; overflow-y: auto; margin-bottom: 1em; } .mod-config-button { height: 2.125em; width: 9em; text-align: center; position: absolute; right: 0em; bottom: 0em; } .controls label { display: block; margin: .3125em 0; } @media (max-width: 37.5em) { .modmenu-page-content { max-width: 95%; padding: .625em; } .mod-item { flex-direction: column; align-items: stretch; } .mod-icon { align-self: center; margin-bottom: .625em; margin-right: 0; } }";var ue=`<div v-if="shouldDisplay" class="modmenu-screen"><div class="sidebar modmenu-page-content roundme_sm ss_marginright bg_blue6 common-box-shadow"><div class="modmenu-header bg_blue3"><header class="f_row align-items-center modmenu-title"><section><h1 class="text-shadow-black-40 text_white nospace">Mods</h1></section></header><aside class="'justify-self-end text-right">{{ mods.length }} mods</aside><input v-model="search" placeholder="Search Mods..." class="mod-menusearch ss_field" /></div><div class="mod-screen-content"><div  class="mod-list"><div class="mod-item" v-for="(mod, i) in filteredMods" :key="i" @click="selectMod(mod)"><div class="mod-icon":style="{ backgroundImage: mod.iconUrl ? mod.iconUrl : backupURL, backgroundSize: 'cover' }"aria-hidden="true"></div><div class="mod-info"><div class="name">{{ mod.name }}</div><div class="author">{{ mod.author }}</div></div></div></div><div class="mod-details" v-if="selectedMod"><div class="mod-meta"><header class="mod-select-header"><div class="mod-icon" :style="{ backgroundImage: selectedMod.iconUrl ? selectedMod.iconUrl : backupURL , backgroundSize: 'cover' }"aria-hidden="true"></div><div><h3> {{ selectedMod.name }}</h3><p><span class="author-text">Author: </span><span class="author">{{selectedMod.author}}</span></p><p v-if="selectedMod.version">Version: {{ selectedMod.version}}</p></div><aside><button class="mod-config-button ss_button" @click="configurationSelected()" > {{ configButtonText }} </button></aside></header></div><p v-if="desciptionScreen" class="mod-desc">{{ selectedMod.description }}</p><div v-if="!desciptionScreen" class="mod-config"><div v-for="(option, idx) in selectedMod.config()" :key="idx"><label>{{option.label ?? "Default Option(s)"}}<input type="checkbox" v-if="option.type == 'Toggle'" v-model="option.value" @change="onOptionsChange(option, idx)"><input type="range" v-if="option.type == 'Slider'" v-model.number="option.value" :min="option.min" :max="option.max" @change="onOptionsChange(option, idx)"><!-- <input type="text" v-if="option.type == 'Input'" ...> --><!-- todo: implement input box + add in slider increment --></label></div></div></div></div></div></div>`;var pe=5,ge="Mod Menu";function bt(){this.showScreen=this.screens.modmenu,this.$refs.equipScreen.removeKeyboardStampPositionHandlers(),this.equip.displayAdHeaderRefresh=!0,this.hideGameMenu(),BAWK.play("ui_toggletab"),this.gameUiRemoveClassForNoScroll(),extern.resetPaperDoll()}function wt(){return!("vueApp"in window)||!("Vue"in window)?!1:[Vue,m.readyState,vueApp].every(e=>e)}function vt(){vueData.screens.modmenu||(Object.assign(vueApp,{switchToModMenuUi:bt}),vueData.screens.modmenu=pe,Object.assign(vueData.loc,{modmenu_title_screen:"mod menu"}),vueData.ui.mainMenu.push({locKey:"modmenu_title_screen",icon:"ico-settings",screen:5,mode:[],hideOn:[]}))}async function xt(){if(await S(wt).catch(i=>x(`ModMenu isReady - ${i}`)),m.vue)return b("It seems the Mod Menu Vue instance is already mounted. ");m.thememanager.addStyle(me,"modmenu-css");let e=Vue.extend({template:ue,data(){let i=window?.Client.extensions;return{backupURL:"url('https://www.svgrepo.com/show/454209/gear-player-multimedia.svg')",search:"",selectedMod:i.find(r=>r.name==ge),configuration:!1,mods:i}},computed:{refreshRequested(){return!1},shouldDisplay(){return vueApp.showScreen==pe},desciptionScreen(){return!this.configuration},configButtonText(){return this.configuration?"Description":"Configuration"},filteredMods(){let i=this.search.toLowerCase()??"";return this.mods.filter(r=>r.name?.toLowerCase().includes(i))}},methods:{selectMod(i){this.selectedMod=i,this.configuration=!1},configurationSelected(){this.configuration=!this.configuration},onSlider(i,r){b("onToggle",{slider:i,idx:r})},onOptionsChange(i,r){this.selectedMod&&this.selectedMod.onOptionsChange&&this.selectedMod.onOptionsChange(i)}}}),t=document.getElementById("mainScreens"),n=document.createElement("modmenu-root");n.id="#modmenu-root",t&&t.appendChild(n),vt();let o=new Vue({render:i=>i(e)}).$mount(n);Vue.mixin({created(){if(!("onMenuItemClick"in this&&typeof this.onMenuItemClick=="function"))return;let i=this.onMenuItemClick.bind(this);this.onMenuItemClick=(r,...a)=>{let c=this?.item?.screen,s=this?.screens?.modmenu;return c&&s&&c==s&&vueApp?.switchToModMenuUi(),i(r,...a)}}}),m.vue=o}var fe=y({uniqueIdentifier:"Grifmin-modmenu-v2",name:ge,author:"Grifmin",version:"0.3a",description:`mod menu v2 implementation
Work in progress`,iconUrl:"url('https://media1.tenor.com/m/77rqMj3uomoAAAAd/gritito.gif)",defaultSettings:{},init:xt,config(){return[{type:"Toggle",label:"Test 1",value:!0},{type:"Toggle",label:"Test 2",value:!1},{type:"Slider",label:"Test slider",max:100,min:0,value:50}]},onOptionsChange(e){return _(`${this.name} - ${this.onOptionsChange?.name}: `,e),!1}});var P,W="comp_settings_control_binder",$t="onKeyUp",he="Enable",St={name:"Stop Tab-Key from pausing",description:"The source mod thatgets rid of the the annoying tab key thing in egg game",modify(e){let n=/"Tab"==[\w$]+&&\(?[\w$]+="ESCAPE",[\w$]+\.preventDefault\(\)(,([\w$]+)\("down"\))/gm.exec(e);if(!n)throw new k("Failed to grab");let[,o]=n;e=e.replace(o,"/*$1*/");let r=/case(?:"|'|`)Tab(?:"|'|`):([\w$_]+)\.preventDefault\(\),\1\.stopPropagation\(\),((?:[\w$_]+)\(\))}/gm.exec(e);if(r){let[a,c,s]=r,l=`/*${s}// we need to exit, but i dont want to exit on 'tab' key */${c}.key != 'Tab' && ${s}`,f=a.replace(s,l);e=e.replace(a,f)}return e}};function Mt(e){e.stopPropagation();let{key:t}=e;t=="Escape"||t=="Enter"||(t==" "&&(t="space",e.preventDefault()),this.capture(t))}function Tt(){function e(t){t.key=="Tab"&&t.preventDefault()}document.addEventListener("keydown",e,!0)}function It(){function e(){P.methods[$t]=Mt}W in window&&(P=window[W],e()),Object.defineProperty(window,W,{set:t=>{P=t,e()},get:()=>P})}var ye=y({uniqueIdentifier:"Grifmin-Tabkeyremap",name:"Tab Key Remap",author:"Grifmin",version:"1.0",description:"Allows the use of the `Tab` key as any keybind, and prevents it from tabbing you out ingame",defaultSettings:{enabled:!1},config(){return[{type:"Toggle",label:he,value:this.settings.enabled}]},init(){this.settings.enabled&&(te(St),It(),Tt())},onOptionsChange(e){return e.type!="Toggle"||e.label!=he?!1:(this.settings.enabled=e.value,!0)},isEnabled(){return this.settings.enabled}});var be="#re-notification { background-color: rgba(0, 0, 0, 0.15) !important; border: 0.0625em solid rgba(0, 0, 0, 0.2) !important; box-shadow: 0 .25em .5em rgba(0, 0, 0, 0.2) !important; border-radius: 0.9375em !important; padding: 0.9375em !important; position: absolute; color: white; font-weight: bold; left: 75%; top: 1em; transform: translateX(-50%); display: none; text-align: left; } #re-notification img { width: 2em; height: 2em; margin-right: 0.75em; }";var we='<div id="re-notification" class="roundedBorder"></div>    <!--<img src="/img/notificationIcon.png"> -->    <!-- <img src="/favicon192.png"> -->    <!--     ^ this is the closest image to the original    although, im not really a fan of it, so im going to remove it    -->    <div id="re-notificationMessage"></div></div>';var U=!1;function Ct(e){let t=document.getElementById("re-notification");if(!t)return;let n=8,o=setInterval(()=>{t.style.opacity=`${n/8}`,t.style.top=n/2-3.5+"em",--n==0&&(clearInterval(o),t.style.display="none",e&&e())},32)}function Et(e,t){if(!U)return;let n=document.getElementById("re-notification");if(!n)return;n.style.opacity="0",n.style.top="-3.5em",n.style.display="flex",n.textContent=e;let o=0,i=setInterval(()=>{document.visibilityState!="hidden"&&(o++,n.style.opacity=`${o/8}`,n.style.top=o/2-3.5+"em",o==8&&(clearInterval(i),t&&setTimeout(Ct,t)))},32)}async function _t(){await S(()=>m.readyState),m.thememanager.addStyle(be,"re-notificaiton-css");let e=document.createElement("div");e.id="G-tweaks-html",e.innerHTML=we,document.body.appendChild(e),Object.defineProperty(window,"notify",{get:()=>Et,configurable:!0})}var ve=y({uniqueIdentifier:"Grifmin-reNotification",defaultSettings:{enabled:!1},name:"Lobby Close Notifications",author:"Grifmin",version:"1.0",description:"adds back the original notifications for when a lobby is closing",config(){return[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},init:function(){U=this.settings.enabled,_t()},onOptionsChange(e){return e.type!="Toggle"||e.label!="Enable"?!1:(this.settings.enabled=e.value,U=this.settings.enabled,!0)},isEnabled(){return this.settings.enabled}});var xe;function kt(){return"Vue"in window}function Ot(e){if(this.stat.kdr!==void 0&&typeof e!="number"&&typeof e[0]=="number")return this.kdr(e[0],e[1]);if(e&&typeof e!="number"){let[t,n]=e.map(o=>typeof o=="number"?o.toLocaleString():o);return`<div>${t}</div> <div>${n.toLocaleString()}</div>`}else return typeof e=="number"?e.toLocaleString():e}function Lt(){return this.hidePrice&&this.isItemOwned?this.loc.eq_owned:this.isItemOwned?this.loc.eq_owned+"!":this.item.price.toLocaleString()}async function Dt(){await S(kt,50),Vue.mixin({created(){"setupStat"in this&&(this.setupStat=Ot)}})}function At(){function e(t){t.computed.itemPrice=Lt,xe=t}"comp_item"in window&&e(window.comp_item),Object.defineProperty(window,"comp_item",{set:e,get:()=>xe})}var $e=y({uniqueIdentifier:"Grifmin-ui_commas",defaultSettings:{enable:!1},author:"Grifmin",name:"Fancy commas",version:"1.0",description:"Adds commas to the stats (profile) page, currency, and shop items",config(){return[{type:"Toggle",label:"Enabled",value:this.settings.enable}]},init:function(){this.settings.enable&&(At(),Dt())},onOptionsChange(e){return e.label!="Enabled"||e.type!="Toggle"?!1:(this.settings.enable=e.value,!0)},isEnabled(){return!0}});function Se(e,t){let o=(()=>{let i=localStorage.getItem(e);return i?{...t,...JSON.parse(i)}:{...t}})();return new Proxy(o,{get(i,r){return o[r]},set(i,r,a){return o[r]=a,localStorage.setItem(e,JSON.stringify(o)),!0},deleteProperty(i,r){return delete o[r],localStorage.setItem(e,JSON.stringify(o)),!0}})}var Me='.house-ad-wrapper #respawn-ad-two #respawn-ad-two #welcome-bundle-ui .welcome-bundle-ui { display: none !important; } img[src="img/eggstra-value-pack.webp"] { display: none !important; } .free-games-logo .vip-club-cta .free-games-title #chickenBadge { display: none !important; } .playerSlot--nam-score { border-radius: 0.5em; } .is-paused .pause-ui-element { left: 1em; } .is-paused .chat-item:first-child.chat-pinned-item { background-color: transparent !important; } .chat-container { display: grid; grid-template-rows: 1fr auto; background-color: rgba(0, 0, 0, 0.15) !important; border: 0.0625em solid rgba(0, 0, 0, 0.2) !important; box-shadow: 0 0.25em 0.5em rgba(0, 0, 0, 0.2) !important; border-radius: 0.9375em !important; padding: 0.9375em !important; scroll-behavior: smooth; max-height: 12.25em; } #chatOut { overflow-y: auto; scroll-behavior: smooth; overflow: scroll; mask-image: linear-gradient( to bottom, transparent 0%, black 10%, black 15%, black 25%, black 85%, black 100% ); hyphens: auto; overflow-wrap: break-word; } #chatIn { position: sticky; overflow-y: auto; scroll-behavior: smooth; bottom: 0; } .is-paused #chatIn { width: 100%; left: 1em; } .is-paused .chat-container { display: grid !important; margin-left: unset; height: auto; } .is-paused #chatIn { position: sticky; } .chat-wrapper .pause-ui-element { bottom: var(--ss-space-lg) !important ; background-color: transparent !important; border: none !important; width: 30% !important; height: auto !important; } .is-paused .pause-ui-element { bottom: var(--ss-space-lg); background-color: transparent; border: none; width: 30%; height: auto !important; } .addChatfiltered { color: red; }';async function Te(){await S(()=>m.readyState),m.thememanager.addStyle(Me,"legacy-gtweaks-css")}var Pt=[re,Z,oe,fe,ye,ve,$e];function Rt(e){return Se(e.uniqueIdentifier,e.defaultSettings)}function jt(e){try{return e.init(),!0}catch(t){return t}}function y(e){let t=Rt(e);return{...e,settings:t}}function Ie(){let e=performance.now();for(let i of Pt){let r=performance.now(),a=jt(i),c={processed:a==!0,loadTime:performance.now()-r};if(Object.assign(c,i),m.addExtension(c),!(a instanceof Error)){b(`Extension Loaded: ${c.uniqueIdentifier}`);continue}x(`Loading: %c${c.uniqueIdentifier} - ${a.message}`,a)}let t=performance.now()-e,o=`Loaded %c${m.extensions.filter(i=>i.processed==!0).length}%c/%c${m.extensions.length}%c extensions in %c${t}%cms successfully`;b(o,p.number,"",p.number,"",p.number,""),m.readyState=!0,Te()}le();Ie();})();
