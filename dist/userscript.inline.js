// ==UserScript==
// @name            GTweaks V2
// @namespace       Grifmin-GTweaks-V2
// @match           *://*shellshock.io/*
// @run-at          document-start
// @version         11.6.2025
// @author          Grifmin
// @description     A work in progress. (if you get this somehow, just know its not complete)
// @unwrap
// ==/UserScript==
"use strict";(()=>{var _e=Object.defineProperty;var ke=(e,t)=>{for(var n in t)_e(e,n,{get:t[n],enumerable:!0})};var u={success:"background: #006700 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",warn:"background: #ff6d00 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",fail:"background: #FF0000 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",info:"background: #413C26 ;padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;",number:"color: #7E64FF ; padding:.125em .375em;border-radius:.1875em;margin-right:.3125em;"},{log:jt,warn:Oe,error:Le,info:De,debug:Ae}=console;function h(e,...t){De(`%cG-Tweaks: %c${e}`,u.success,"",...t)}function y(e,...t){Le(`%cG-Tweaks Error: %c${e}`,u.fail,"",...t)}function x(e,...t){Oe(`%cG-Tweaks Warn: %c${e}`,u.warn,"",...t)}function $(e,...t){Ae(`%cG-Tweaks Debug: %c${e}`,u.warn,"",...t)}var V={aliases:{"star wars":{tags:["Eggwalker","Eggwalker2"],negate:[1127,1135,1319]},mario:{tags:["Kart"]},"among us":{tags:["AmongEgg"]}}};var{aliases:K}=V;function J(e,t,n){return t.filter(o=>(n.isCaseSensitive?o.name:o.name.toLowerCase()).includes(e))}function je(e,t,n){let o=Number(e);return t.filter(i=>i.id==o)}function Re(e,t,n){return t.filter(o=>(n.isCaseSensitive?o.item_data.meshName:o.item_data.meshName?.toLowerCase())?.includes(e))}function Be(e,t){let n=[];if(t.tags){let{tags:o}=t,i=e.filter(r=>r.item_data.tags?.some(s=>o.includes(s)));n=n.concat(i)}else if(t.ids){let{ids:o}=t,i=e.filter(r=>o.includes(r.id));n=n.concat(i)}else if(t.names){let{names:o}=t,i=o.map(r=>J(r,e,{isCaseSensitive:!0})).flat();n=n.concat(i)}if(t.negate){let{negate:o}=t;n=n.filter(i=>!o.includes(i.id))}return n}function Ne(e,t,n){let o=[],i=c=>c.replace(/\s/g,""),r=Object.keys(K).map(i);if(!r.some(c=>c.includes(e)))return h(`${e} not in`,r),[];let s=([c,l])=>[i(c),l],a=Object.entries(K).map(s);for(let[c,l]of a){if(!c.includes(e))continue;let b=Be(t,l);o=o.concat(b)}return o}function qe(e,t,n){return t.filter(o=>o.item_data.tags?.some(i=>(n.isCaseSensitive?i:i.toLowerCase()).includes(e)))}var Fe=[Re,J,Ne,je,qe],R=class{items;options;constructor(t,n){Object.assign(this,{items:t,options:n})}search(t){t=this.options.isCaseSensitive?t:t.toLowerCase();let n=Fe.map(i=>i(t,this.items,this.options)).flat(),o=[...new Set(n)];return Object.entries(o).map(([i,r])=>({item:r}))}},Ge=`This extension provides an alternative searching method for the inventory. 
Completely optional though. 
Feel free to request improvements for the alternative search extension!`,B,C;function Ue(){Object.defineProperty(window,"Fuse",{get(){return C?R:B},set(e){B=e},configurable:!0})}var X=f({uniqueIdentifier:"Grifmin-AlternativeSearch",defaultSettings:{enabled:!1},author:"Grifmin",description:Ge,version:"1.0",name:"Alternative Search",init(){B=window.Fuse,C=this.settings.enabled,Ue()},config(){return this.settings,[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},onOptionsChange(e){if($(`${this.name} - `,e,this.settings),e.label=="Enable"&&e.type=="Toggle"){let t=e.value;$(`${this.name} - updating state from ${this.settings.enabled} to ${e.value}`),this.settings.enabled=t,C=t}return C},isEnabled(){return this.settings.enabled}});var N={},T={get sourcemappings(){return N},src:"",Getter:()=>{throw new Error("Getter not defined yet.")},getMappings(e=N){function t(i){try{return T.Getter(i)}catch{return}}let n=Object.entries(e).map(([i,r])=>[i,t(r)]);return Object.fromEntries(n)}};function _(e){Object.assign(N,e)}function Z(e){try{Object.defineProperty(window,"ModLoader",{get:()=>e,configurable:!0})}catch(t){y("Error when attempting to define ModLoader on window",t)}}function Q(){if("ModLoader"in window){let e=window.ModLoader,t=Object.entries(T).filter(([r,s])=>!e[r]),n=Object.fromEntries(t),o=Object.assign(n,window.ModLoader),i=new Error("ModLoader already defined on window object",{cause:window.ModLoader});return Z(o),y("%cWarning: ",u.warn,i)}Z(T)}var q={};ke(q,{AdblockMod:()=>ze,ChallengesReRoll:()=>We,ChickenWinnerTryPlay:()=>He,ExcessiveLogsPatch:()=>Ke,StripObfuscatedCode:()=>Ve,addChatRewrite:()=>Je,exitSpectateModePatch:()=>Ze,setRespawnTimerMod:()=>Xe});async function S(e,t=250,n=3e4){let o=Date.now(),i;return new Promise((r,s)=>{i=setInterval(()=>{if(Date.now()-o>=n)return clearInterval(i),s(`Waited for ${n}`);e()&&(clearInterval(i),r())},t)})}var ze={name:"Anti Adblock",description:"Has multiple little patches to assist with getting around adblocking measures.",version:"10.12.25",modify:function(e){g.gm`testing`;let t=d(/get productBlockAds\(\)\s?{return ([\.A-z0-9_$]+)}/gm,e,"Failed to grab productBlockAds"),[,n]=t,o=g.gm`(${n}=)`,i=/(console\.log\(`Mouse button \$\{\w\.button\} (?:up|down), Pointer Lock: \$\{!!document\.pointerLockElement\}`\))/gm;return e=e.replace(o,"$1true||$2").replace(i,"void 69 /*$1*/").replace(/(hideAds=)([A-z0-9_!]+)/gm,"$1true||$2").replace(/adBlockerDetected\(\){.*?}/gm,"adBlockerDetected(){}"),e}},We={name:"Challenges Re-Roll bypass",description:"Bypasses the challenges re-roll from checking the vip (isUpgraded) status of the user.",version:"8.30.25",modify:function(e){let t=/(isUpgraded\(\))(\?[\w_$]+\([\w_$]+,this\.rerollVipSuccess\.bind\(this)/gm;return e.replace(t,"$1||true$2")}},He={name:"Chicken Winner Play bypass",description:"Bypasses the chicken winner `chwTryPlay` function from checking the vip (isUpgraded) status of the user.",version:"10.12.25",modify:function(e){let t=/[\.A-z0-0_$]+\.isUpgraded\(\)(\?\([A-z09-9_$]+\("chwTryPlay\(\) VIP\. No ads for you!)/gm;return e.replace(t,"true$1")}},Ve={name:"Strip Obfuscated Code",description:"This strips out the randomly obfuscated code that is in the game files",version:"10.12.25",modify:function(e){let t=/(var ([\w_$]+),([\w_$]+),([\w_$]+)=\[(?:"[\w=]+",){5}"[\w]+"\].*?};)/gm;e=e.replace(t,"/*$1*/");let n=/(new\(window\[.*?\].*?}\);)/gm;return e=e.replace(n,"/*$1*/"),e}},Ke={name:"Excessive Logs Patch",description:"Reduces some of the (in my opinion) excessive and annoyingh logging",version:"10.12.25",modify:function(e){return e=e.replace(/(setTimeout)(\(\(\(\)=>\([\w$_]+=null,console\.log\("%cSTOP!)/gm,"void/*$1*/ $2").replace(/(console\.log\("ACTIVE ZONE IS NOW.*?\))/gm,"void 0/*$1*/"),e}},Je={name:"addChat rewrite",description:`a re written version of the addChat function.
Display filtered messages, patches potential RCE bug (yes i reported it back in 1.15.2024)`,version:"10.31.25",modify:function(e){let t=/function ([\w$_]+)\(((?:[\w$_]+),?){5}\){const [\w$_]+=[\w$_]+\.querySelectorAll\("\.chat-item/gm,[,n]=d(t,e),o=g.gm`(function ${n}\\(([\\w_$]+),([\\w_$]+),([\\w_$]+),([\\w_$]+),([\\w_$]+)\\){.*?})function`,i=d(o,e,"Unable to grab addChat function name"),[,r,s,a,c,l,b]=i,[,p,v]=d(g.gm`([A-z0-9_$]+)=([A-z0-9_$]+)\\[${c}]`,r,"unable to get player, playerlist"),[,M]=d(/([A-z0-9_$]+)\.querySelectorAll\("\.chat-item"\)/,r),[,,w]=d(/([A-z0-9_$]+)\.length>0&&!([A-z0-9_$]+)\(\1\)/,r),[,L]=d(g.gm`([A-z0-9_$]+)\\(${p}\.social\\)`,r),[,D]=d(g.gm`([A-z0-9_$]+)\\.text\\[${p}\\.team\\]`,r),[,A]=d(g.gm`${c}===([A-z0-9_$]+)\\|\\|`,r),[,P]=d(/[\w$_]+&([\w$_]+)&&\([\w$_]+\.classList\.add\(/gm,e),[,$e]=d(/[\w$_]+&([\w$_]+)&&\(.\.style\.color=[\w$_]+\.text/gm,e),[,j]=d(/([A-z0-9_$]+)\.scrollTop=\1\.scrollHeight/,r),[,Ee]=d(/"clickme"\),([A-z0-9_$]+)\(([A-z0-9_$]+),([A-z0-9_$]+),([A-z0-9_$]+)\)/,r),[,z]=d(g.gm`([A-z0-9_$]+)\\.innerHTML=${s},${s}=`,r),[,W]=d(g.gm`=${p}\\.([\\w_$]+)`,r),[,H]=d(g.gm`[\\w$_]+!=([\\w$_]+)\.${W}`,r);_({addChat:n,me:H,isBadWord:w,teamColors:D,chatOutEl:M,players:v,meId:A});let Ce=`function ${n} (message, flags, playerId, custom_click_callback, formatter) {  let chatItems = ${M}.querySelectorAll(".chat-item");  if (!message) {  /* this is scuffed, but this is accurate to the vanilla function...*/  if (!flags & ${P}) return;  for (let chat of chatItems) {  if (!chat.classList.contains("chat-pinned-item")) return;  chat.remove();  }  }  let chatItem = document.createElement("div");  let playerMsgSpan   = document.createElement("span");  let playerInfoDiv   = document.createElement("div");  let playerNameSpan  = document.createElement("span");  let socialIcon   = document.createElement("i");  let hasUpgrade   = false;  let SocialBadge  = false;  let uniqueId = false;  chatItem.classList.add("chat-item");  playerInfoDiv.style.display = "inline-block";  /* i dont like this if statement tbh, but i guess its fine for now. (replicate first, before modification)*/  if (playerId > 253) {  if (playerId == 255) {  playerNameSpan.textContent = "SERVER: ";  playerInfoDiv.style.color = "#ff0";  } else if (playerId == 254) {  playerNameSpan.textContent = "MOD: ";  playerInfoDiv.style.color = "#0f0";  }  playerNameSpan.classList.add("chat-player-name", "ss_marginright_xs");  playerInfoDiv.appendChild(playerNameSpan);  } else {  let player = ${v}[playerId];   /* here they are "purifying" the text to remove any <asdf>. but why innerHTML */  ${z}.innerHTML = message;  message = ${z}.textContent.trim();  const condition = ( playerId === ${A} || ((!(player?.muted ?? true) && message.length)) ); /* updated (better) condition*/  /*const condition = ( playerId === ${A} ||  (  playerId !== null &&   player &&   !player.muted &&   message.length > 0 &&   message.indexOf("<")   )  )*/  /* rewrite "condition" var as its not an actual declared variable? */  if (condition) {  /* hasUpgrade = !!(player.upgradeProductId && player.upgradeProductId > 0)  bruh */  hasUpgrade = (player?.upgradeProductId > 1);  SocialBadge = ${L}(player.social);  if (SocialBadge && !player.hideBadge) {  socialIcon.classList.add("fab", SOCIALMEDIA[SocialBadge.id]);  /*  should SOCIALMEDIA be dynamic? ^ it is a const in index.html*/  socialIcon.classList.add("ss_marginright_xs");  } else if (hasUpgrade && !player.hideBadge) {  socialIcon.classList.add("fas", "fa-egg", "hidden", "text_gold", "vip-egg");  socialIcon.classList.add("ss_marginright_xs");  }  uniqueId = player.${W};  playerNameSpan.classList.add("chat-player-name", "ss_marginright_xs");  playerNameSpan.textContent = player.name + ": ";  /* console.log(player.name, message); stawp it console logging :(*/  if (flags & ${$e}) {  playerMsgSpan.style.color = ${D}.text[player.team];  playerMsgSpan.classList.add("chat-team");  }  playerInfoDiv.style.color = ${D}.text[player.team];  playerInfoDiv.appendChild(socialIcon);  playerInfoDiv.appendChild(playerNameSpan);  } else if (playerId !== null) {  return; /* this *should* never happen.*/  }  }  if (chatItems.length > 4) {  if (chatItems[0].classList.contains("chat-pinned-item")) {  if (flags & ${P}) {  chatItems[0].remove();  } else {  chatItems[1].remove();  }  } else {  chatItems[0].remove();  }  }  /* playerMsgSpan.innerHTML = message; - disabling due to html injection concerns*/  playerMsgSpan.textContent = message;   if (playerId < 253 && ${w}(message)) {   playerMsgSpan.classList.add('addChatfiltered')   }  if (formatter) {  playerMsgSpan.innerHTML = playerMsgSpan.innerHTML.format(formatter)   /** this *does* re introduce the html injection concerns. however this should only ever be called internally (ie: share link popup)   * ^ this is neat. could be used for custom elements in html :eyes: maybe even :emoji:   */  }  if (flags & ${P}) {  playerMsgSpan.classList.add("chat-pinned");  chatItem.classList.add("chat-pinned-item");  }  chatItem.appendChild(playerInfoDiv);  chatItem.appendChild(playerMsgSpan);  chatItem.classList.add("clickme");  chatItem.onclick = () => {  if (!uniqueId && custom_click_callback) {  custom_click_callback();  /*} else if (playerId != ${H}.id) {*/   } else {  playerNameSpan.classList.add("clickme");  ${Ee}(uniqueId, SocialBadge, hasUpgrade)();  }  };  ${M}.appendChild(chatItem);  if (${j}) {  ${j}.scrollTop = ${j}.scrollHeight;  }  }`;return e.replace(r,Ce)}},Xe={name:"Respawn Timer mod",description:"Modifies the setRespawnTime() function to have some decimal places",version:"10.12.25",modify:function(e){let t=d(/function ([A-z0-9_$]+)\(([A-z0-9_$]+)\){([\w|$]+)=Math\.max\(\2,\3\).*?1200\)}/gm,e),[n,o,,i]=t;_({setRespawnTime:o});let r=d(/([\w_$]+)\.clear\(([\w_$]+)\),([\w_$]+)\(\),([\w_$]+)\(\)/gm,n),[,s,a,c,l]=r,b=d(g.gm`${i}<=0&&([A-z0-9_$]+)`,n),[,p]=b;_({setRespawnTime:o,respawnTime:i,respawnInterval:a,doMapOverviewCamera:l,interval:s,inGame:p});let M=`function ${o} (sec, decimals = 1, FATSec = 1200) {  ${i} = Math.max(sec, ${i});  /* ^ set the new respawntime (if needed)*/  if (${a}) clearInterval(${a});  /* vueApp.game.respawnTime = ${i}.toFixed(decimals); */  ${a} = setInterval(() => {  ${i} = Number((${i} - (1 / (decimals * 10))).toFixed(decimals));  /* vueApp.game.respawnTime = Math.min(${i}, 5); */  vueApp.game.respawnTime = ${i}.toFixed(decimals);  /* ^ shitty work around. for some reason it gets turned into a string?*/  if (${i} <= 0 && ${p}) {  ${i} = -1;  clearInterval(${a});  ${c}();  /* ^is this really needed? */  ${l}();  }  }, Math.floor(FATSec / (decimals * 10))); /* why is this 1.2sec instead of 1sec? */   }`;return(async()=>{await S(()=>vueApp?.$refs?.gameScreen);let w=vueApp.$refs.gameScreen,L=()=>!w.delayTheCracking&&!w.isRespawning?w.loc.ui_game_get_ready:w.delayTheCracking&&w.isRespawning?w.game.respawnTime:w.loc.p_pause_play;Object.defineProperty(vueApp.$refs.gameScreen,"playBtnText",{get:L})})(),e.replace(n,M)}},Ze={name:"exit SpectateMode patch",description:"This is my psudo attempt to patch out the exit spectator mode from setting the respawn time to 5 seconds",version:"9.1.25",requiredMappings:["me","setRespawnTime"],modify:function(e,t){let{me:n,setRespawnTime:o}=t,i=d(g.gm`respawn:function\\(\\)\\{return [\\w_$]+\\?\\(${n}\\.([\\w_$]+)=!0`,e,"Failed to grab playingState"),[,r]=i,s=g.gm`document\\.onpointerlockchange=function\\(\\){!document\\.pointerLockElement&&${n}&&([\\w_$]+)\\(\\)},`,a=d(s,e,"Failed to grab func name"),[,c]=a,l=g.gm`}\\(\\)}(function ${c}\\(\\)\\{.*?console\\.log\\("pausing game via pointerlock exit"\\),[\\w_$]+\\(\\),crazySdk\\.gameplayStop\\(\\)})`,b=d(l,e,"Failed to grab func src"),[,p]=b,v=p.replace(`${c}(){`,`${c}(){let wasIngame = ${n}.${r};console.log({wasIngame});`);return v=v.replace(o,`!wasIngame ? ${o}(0) : ${o}`),e.replace(p,v)}};var Qe=Object.values(q),Ye={name:"Basis Injection",description:"This is the kind of base line function that allows for all sorts of nifty things",modify:function(e){let t=/(window\.extern)/gm;return e.replace(t,"((/*GTweaks V2*/)=>ModLoader.Getter=(str)=>eval(str))();$1")}},et={name:"Unsafe",description:"This just tests that the loader properly catches unsafe modifications to the source code",modify:function(e){return e.replace('"',"")}},I=[et,Ye,...Qe];function ee(e){I.push(e)}var E=class extends Error{};function tt(e,t,...n){function o(r){return r==null?"":r.replace(/\$/gm,"\\$").replace(".","\\.")}let i=t.map((r,s)=>r+o(n[s])).join("");return new RegExp(i,e)}var g={gm(e,...t){return tt("gm",e,...t)}};function d(e,t,n){let o=e.exec(t);if(!o)throw new E(n??`Error pattern matching with ${e}`,{cause:e});return o}function te(e){return e.requiredMappings?ne(e)!=null:!0}function nt(e){try{return new Function(e)}catch(t){return t}}function ne(e){let{requiredMappings:t}=e,{sourcemappings:n}=T,o=Object.entries(n);if(!t||o.length==0||!t.every(a=>n[a]))return;let r=Object.entries(n).filter(([a,c])=>t.includes(a));return Object.fromEntries(r)}function it(e,t){let n=ne(e);try{let o=e.modify(t,n),i=nt(o);if(i instanceof Error)throw i;return o}catch(o){return o}}function F(e,t=I,n=0,o=t.length){let i=e,r=performance.now(),[s,a]=[t.filter(te),t.filter(l=>!te(l))];for(let l of s){let b=performance.now(),p=it(l,i),v=performance.now()-b;if(p instanceof Error){let M=`Loading sourcemod ${l.name} %c${v}%cms - `;y(M,u.number,"",p.message);continue}else if(!p){x(`Source Modification ${l.name} didnt return type string`,{result:p});continue}i=p,h(`Source Modification ${l.name} %c${v}%cms`,u.number,"")}if(a.length||n>0){if(n>=o||s.length==0){let l=`Unable to load ${a.length} Source mod${a.length==1?"":"s"}: `;return a.length!=0&&x(l,a.map(b=>b.name).join(", ")),i}n++,i=F(i,a,n,o)}let c=performance.now()-r;return h(`All Source Modifications completed in %c${c}%cms`,u.number,""),i}function ot(e){return!!e.startsWith("(()=>{")}function rt(){let e=HTMLElement.prototype.appendChild;HTMLElement.prototype.appendChild=function(t){return t instanceof HTMLScriptElement&&ot(t.innerHTML)&&(T.src=t.innerHTML,t.innerHTML=F(t.innerHTML),HTMLElement.prototype.appendChild=e),e.call(this,t)},Q()}var st=`Modifies the game's internal source code on load in.
Toggling mods not implemented as of yet. (as i cbf)`.trim(),ie=f({uniqueIdentifier:"Grifmin-SourceExtensions",iconUrl:"",name:"Source Extension Loader",author:"Grifmin",version:"0.1 alpha",description:st,defaultSettings:{enabled:!0,modStates:{}},config(){let e=[{type:"Toggle",label:"Enable Game Modification",value:this.settings.enabled}];for(let t of I){let n={type:"Toggle",label:`${t.name} - toggle`,value:this.settings.modStates[t.name]??!0};e.push(n)}return e},init:function(){this.settings.enabled!=!1&&rt()},onOptionsChange(e){if(e.type!="Toggle")return!1;if(x(`${this.name} - window refresh request. - Grif fix this you lazy bastard.`),e.label=="Enable Game Modification")return this.settings.enabled=e.value,e.value;let t=I.find(n=>e.label?.includes(n.name));return t?(this.settings.modStates[t.name]=!1,e.value):!1},isEnabled(){return this.settings.enabled}});var at=[IntersectionObserver,BroadcastChannel,RegExp,Object,Proxy,Function,Number,Boolean,Date],ct=[String];function dt(e){e?.prototype&&Object.freeze(e.prototype),Object.freeze(e)}var lt=e=>{let t={writable:!1,configurable:!1};for(let[n,o]of Object.entries(Object.getOwnPropertyDescriptors(e.prototype)))o.configurable&&Object.defineProperty(e.prototype,n,t)};function mt(){try{at.forEach(dt),ct.forEach(lt)}catch(e){throw e instanceof TypeError&&console.log(e),e}}var ut="Protects various js Object prototypes. (useful when attempting to mitigate egg games various anti modding approaches)".trim(),oe=f({uniqueIdentifier:"Grifmin-Protec",defaultSettings:{enabled:!0},author:"Grifmin",description:ut,version:"1.0",name:"Internal Protections",config(){return[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},init(){this.settings.enabled&&mt()},onOptionsChange(e){return e.type!="Toggle"?!1:(this.settings.enabled=e.value,x(`${this.name} - window refresh request. - Grif fix this you lazy bastard.`),e.value)},isEnabled(){return this.settings.enabled}});var pt="ThemeManager-div",k;function re(){if(k)return k;let e=document.createElement("div");return e.id=pt,document.body.append(e),k=e,k}var G={themes:{},addStyle:function(e,t){if(typeof e=="string"){let n=e;e=document.createElement("style"),e.innerHTML=n,t&&(e.id=t)}return t||(t=e.id),document.body?(re().append(e),this.themes[t]=e,e):(document.addEventListener("DOMContentLoaded",()=>{re().append(e),this.themes[t]=e},{once:!0}),e)}};var se=".firebaseID { visibility: hidden !important; display: none !important; opacity: 0 !important; }";var gt=Date.now(),m;function ae(){return{thememanager:G,readyState:!1,extensions:[],addExtension(t){if(this.extensions.some(n=>n.uniqueIdentifier==t.uniqueIdentifier))return x(`duplicate Extension - ${t.uniqueIdentifier}`);t.id||(t.id=this.extensions.length),this.extensions.push(t)},get startTime(){return gt}}}function ce(){try{Object.defineProperty(window,"Client",{get:()=>m,configurable:!0})}catch(e){y("Error when attempting to update Client definitions",e)}}function ft(){G.addStyle(se,"default-css")}function de(){if("Client"in window){let t=window.Client,n=Object.entries(ae()).filter(([r,s])=>!t[r]),o=Object.fromEntries(n);m=Object.assign(o,window.Client);let i=new Error("Client already exists on window object ",{cause:window.Client});return ce(),x("%cError:",u.warn,i)}m=ae();let e=new Date(m.startTime).toLocaleString();h(`Startup time: ${e}`),ce(),ft()}var le=".modmenu-screen { display: flex; justify-content: center; align-items: center; min-height: 100vh; } .modmenu-page-content { height: calc(100vh - 10em); width: 100%; border: var(--ss-common-border-width) solid var(--ss-blue5); background-color: var(--ss-blue6) !important; border-radius: .9375em; box-shadow: 0 .5em 1.5em rgba(0, 0, 0, 0.4); position: relative; overflow: hidden; } .modmenu-title { position: absolute; right: 50%; } .modmenu-header { padding: .5em; width: 100%; height: 20%; box-sizing: border-box; } .mod-screen-content { display: flex; height: 100%; overflow: hidden; } .mod-list { display: flex; flex: 0 0 30%; flex-direction: column; max-width: 30%; overflow-y: auto; overflow-x: hidden; max-height: 85%; border-radius: .5em; box-shadow: inset 0 -.5em .625em -.375em rgba(0, 0, 0, 0.4); gap: .25em; height: 80%; padding: .5em; } .mod-item { border-radius: .625em; border: var(--ss-common-border-width) solid var(--ss-blue5); display: flex; padding: .3125em; } .mod-item .mod-icon { flex-shrink: 0; } .mod-item:nth-child(odd) { background-color: var(--ss-blue3); } .mod-item:nth-child(even) { background-color: #77cbe6; } .mod-icon { width: 6em; height: 6em; margin-right: .5em; border-radius: .5em; } .mod-info .name { font-weight: bold; font-size: 1.2em; color: white; } .mod-info .author { font-weight: bold; font-size: 1em; margin-bottom: .3125em; color: #924eff; } .mod-info { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; } .mod-details { display: flex; flex: 1; flex-direction: column; padding: .5em; padding-bottom: 1.5em; max-height: 85%; height: 85%; overflow: hidden; } .mod-select-header { display: flex; align-items: center; gap: .625em; position: relative; } .mod-desc { flex: 1; font-size: 1em; line-height: 1.4; white-space: pre-line; border: red solid; border-radius: .25em; margin-top: .625em; padding: .625em; overflow-y: auto; } .mod-config { flex: 1; border: red solid; border-radius: .25em; margin-top: .625em; padding: .625em; overflow-y: auto; margin-bottom: 1em; } .mod-config-button { height: 2.125em; width: 9em; text-align: center; position: absolute; right: 0em; bottom: 0em; } .controls label { display: block; margin: .3125em 0; } @media (max-width: 37.5em) { .modmenu-page-content { max-width: 95%; padding: .625em; } .mod-item { flex-direction: column; align-items: stretch; } .mod-icon { align-self: center; margin-bottom: .625em; margin-right: 0; } }";var me=`<div v-if="shouldDisplay" class="modmenu-screen"><div class="sidebar modmenu-page-content roundme_sm ss_marginright bg_blue6 common-box-shadow"><div class="modmenu-header bg_blue3"><header class="f_row align-items-center modmenu-title"><section><h1 class="text-shadow-black-40 text_white nospace">Mods</h1></section></header><aside class="'justify-self-end text-right">{{ mods.length }} mods</aside><input v-model="search" placeholder="Search Mods..." class="mod-menusearch ss_field" /></div><div class="mod-screen-content"><div  class="mod-list"><div class="mod-item" v-for="(mod, i) in filteredMods" :key="i" @click="selectMod(mod)"><div class="mod-icon":style="{ backgroundImage: mod.iconUrl ? mod.iconUrl : backupURL, backgroundSize: 'cover' }"aria-hidden="true"></div><div class="mod-info"><div class="name">{{ mod.name }}</div><div class="author">{{ mod.author }}</div></div></div></div><div class="mod-details" v-if="selectedMod"><div class="mod-meta"><header class="mod-select-header"><div class="mod-icon" :style="{ backgroundImage: selectedMod.iconUrl ? selectedMod.iconUrl : backupURL , backgroundSize: 'cover' }"aria-hidden="true"></div><div><h3> {{ selectedMod.name }}</h3><p><span class="author-text">Author: </span><span class="author">{{selectedMod.author}}</span></p><p v-if="selectedMod.version">Version: {{ selectedMod.version}}</p></div><aside><button class="mod-config-button ss_button" @click="configurationSelected()" > {{ configButtonText }} </button></aside></header></div><p v-if="desciptionScreen" class="mod-desc">{{ selectedMod.description }}</p><div v-if="!desciptionScreen" class="mod-config"><div v-for="(option, idx) in selectedMod.config()" :key="idx"><label>{{option.label ?? "Default Option(s)"}}<input type="checkbox" v-if="option.type == 'Toggle'" v-model="option.value" @change="onOptionsChange(option, idx)"><input type="range" v-if="option.type == 'Slider'" v-model.number="option.value" :min="option.min" :max="option.max" @change="onOptionsChange(option, idx)"><!-- <input type="text" v-if="option.type == 'Input'" ...> --><!-- todo: implement input box + add in slider increment --></label></div></div></div></div></div></div>`;var ue=5,pe="Mod Menu";function ht(){this.showScreen=this.screens.modmenu,this.$refs.equipScreen.removeKeyboardStampPositionHandlers(),this.equip.displayAdHeaderRefresh=!0,this.hideGameMenu(),BAWK.play("ui_toggletab"),this.gameUiRemoveClassForNoScroll(),extern.resetPaperDoll()}function yt(){return[Vue,m.readyState,vueApp].every(e=>e)}function bt(){vueData.screens.modmenu||(Object.assign(vueApp,{switchToModMenuUi:ht}),vueData.screens.modmenu=ue,vueData.loc.modmenu_title_screen="mod menu",vueData.ui.mainMenu.push({locKey:"modmenu_title_screen",icon:"ico-settings",screen:5,mode:[],hideOn:[]}))}async function vt(){if(await S(yt).catch(i=>y(`ModMenu isReady - ${i}`)),m.vue)return h("It seems the Mod Menu Vue instance is already mounted. ");m.thememanager.addStyle(le,"modmenu-css");let e=Vue.extend({template:me,data(){let i=window?.Client.extensions;return{backupURL:"url('https://www.svgrepo.com/show/454209/gear-player-multimedia.svg')",search:"",selectedMod:i.find(r=>r.name==pe),configuration:!1,mods:i}},computed:{refreshRequested(){return!1},shouldDisplay(){return vueApp.showScreen==ue},desciptionScreen(){return!this.configuration},configButtonText(){return this.configuration?"Description":"Configuration"},filteredMods(){let i=this.search.toLowerCase()??"";return this.mods.filter(r=>r.name?.toLowerCase().includes(i))}},methods:{selectMod(i){this.selectedMod=i,this.configuration=!1},configurationSelected(){this.configuration=!this.configuration},onSlider(i,r){h("onToggle",{slider:i,idx:r})},onOptionsChange(i,r){this.selectedMod&&this.selectedMod.onOptionsChange&&this.selectedMod.onOptionsChange(i)}}}),t=document.getElementById("mainScreens"),n=document.createElement("modmenu-root");n.id="#modmenu-root",t&&t.appendChild(n),bt();let o=new Vue({render:i=>i(e)}).$mount(n);Vue.mixin({created(){if(!("onMenuItemClick"in this&&typeof this.onMenuItemClick=="function"))return;let i=this.onMenuItemClick.bind(this);this.onMenuItemClick=(r,...s)=>{let a=this?.item?.screen,c=this?.screens?.modmenu;return a&&c&&a==c&&vueApp?.switchToModMenuUi(),i(r,...s)}}}),m.vue=o}var ge=f({uniqueIdentifier:"Grifmin-modmenu-v2",name:pe,author:"Grifmin",version:"0.3a",description:`mod menu v2 implementation
Work in progress`,iconUrl:"url('https://media1.tenor.com/m/77rqMj3uomoAAAAd/gritito.gif)",defaultSettings:{},init:vt,config(){return[{type:"Toggle",label:"Test 1",value:!0},{type:"Toggle",label:"Test 2",value:!1},{type:"Slider",label:"Test slider",max:100,min:0,value:50}]},onOptionsChange(e){return $(`${this.name} - ${this.onOptionsChange?.name}: `,e),!1}});var O,U="comp_settings_control_binder",wt="onKeyUp",fe="Enable",xt={name:"Stop Tab-Key from pausing",description:"The source mod thatgets rid of the the annoying tab key thing in egg game",modify(e){let n=/"Tab"==[\w$]+&&\(?[\w$]+="ESCAPE",[\w$]+\.preventDefault\(\)(,([\w$]+)\("down"\))/gm.exec(e);if(!n)throw new E("Failed to grab");let[,o]=n;e=e.replace(o,"/*$1*/");let r=/case(?:"|'|`)Tab(?:"|'|`):([\w$_]+)\.preventDefault\(\),\1\.stopPropagation\(\),((?:[\w$_]+)\(\))}/gm.exec(e);if(r){let[s,a,c]=r,l=s.replace(c,`${a}.key != 'Tab' && ${c}`);e=e.replace(s,l)}return e}};function St(e){e.stopPropagation();let{key:t}=e;t=="Escape"||t=="Enter"||(t==" "&&(t="space",e.preventDefault()),this.capture(t))}function Mt(){function e(t){t.key=="Tab"&&t.preventDefault()}document.addEventListener("keydown",e,!0)}function Tt(){function e(){O.methods[wt]=St}U in window&&(O=window[U],e()),Object.defineProperty(window,U,{set:t=>{O=t,e()},get:()=>O})}var he=f({uniqueIdentifier:"Grifmin-Tabkeyremap",name:"Tab Key Remap",author:"Grifmin",version:"1.0",description:"Allows the use of the `Tab` key as any keybind, and prevents it from tabbing you out ingame",defaultSettings:{enabled:!1},config(){return[{type:"Toggle",label:fe,value:this.settings.enabled}]},init(){this.settings.enabled&&(ee(xt),Tt(),Mt())},onOptionsChange(e){return e.type!="Toggle"||e.label!=fe?!1:(this.settings.enabled=e.value,!0)},isEnabled(){return this.settings.enabled}});var ye="#re-notification { background-color: rgba(0, 0, 0, 0.15) !important; border: 0.0625em solid rgba(0, 0, 0, 0.2) !important; box-shadow: 0 .25em .5em rgba(0, 0, 0, 0.2) !important; border-radius: 0.9375em !important; padding: 0.9375em !important; position: absolute; color: white; font-weight: bold; left: 75%; top: 1em; transform: translateX(-50%); display: none; text-align: left; } #re-notification img { width: 2em; height: 2em; margin-right: 0.75em; }";var be='<div id="re-notification" class="roundedBorder"></div>    <!--<img src="/img/notificationIcon.png"> -->    <!-- <img src="/favicon192.png"> -->    <!--     ^ this is the closest image to the original    although, im not really a fan of it, so im going to remove it    -->    <div id="re-notificationMessage"></div></div>';function It(e){let t=document.getElementById("re-notification");if(!t)return;let n=8,o=setInterval(()=>{t.style.opacity=`${n/8}`,t.style.top=n/2-3.5+"em",--n==0&&(clearInterval(o),t.style.display="none",e&&e())},32)}function $t(e,t){let n=document.getElementById("re-notification");if(!n)return;n.style.opacity="0",n.style.top="-3.5em",n.style.display="flex",n.textContent=e;let o=0,i=setInterval(()=>{document.visibilityState!="hidden"&&(o++,n.style.opacity=`${o/8}`,n.style.top=o/2-3.5+"em",o==8&&(clearInterval(i),t&&setTimeout(It,t)))},32)}async function Et(){await S(()=>m.readyState),m.thememanager.addStyle(ye,"re-notificaiton-css");let e=document.createElement("div");e.id="G-tweaks-html",e.innerHTML=be,document.body.appendChild(e),Object.defineProperty(window,"notify",{get:()=>$t,configurable:!0})}var ve=f({uniqueIdentifier:"Grifmin-reNotification",defaultSettings:{enabled:!1},name:"Lobby Close Notifications",author:"Grifmin",version:"1.0",description:"adds back the original notifications for when a lobby is closing",config(){return[{type:"Toggle",label:"Enable",value:this.settings.enabled}]},init:function(){this.settings.enabled&&Et()},onOptionsChange(e){return e.type!="Toggle"||e.label!="Enable"?!1:(this.settings.enabled=e.value,!0)},isEnabled(){return this.settings.enabled}});var we;function Ct(e){if(this.stat.kdr!==void 0&&typeof e!="number"&&typeof e[0]=="number")return this.kdr(e[0],e[1]);if(e&&typeof e!="number"){let[t,n]=e.map(o=>typeof o=="number"?o.toLocaleString():o);return`<div>${t}</div> <div>${n.toLocaleString()}</div>`}else return typeof e=="number"?e.toLocaleString():e}function _t(){return this.hidePrice&&this.isItemOwned?this.loc.eq_owned:this.isItemOwned?this.loc.eq_owned+"!":this.item.price.toLocaleString()}async function kt(){await S(()=>[Vue].every(e=>e),50),Vue.mixin({created(){"setupStat"in this&&(this.setupStat=Ct)}})}function Ot(){function e(t){t.computed.itemPrice=_t,we=t}"comp_item"in window&&e(window.comp_item),Object.defineProperty(window,"comp_item",{set:e,get:()=>we})}var xe=f({uniqueIdentifier:"Grifmin-ui_commas",defaultSettings:{enable:!1},author:"Grifmin",name:"Fancy commas",version:"1.0",description:"Adds commas to the stats (profile) page, currency, and shop items",config(){return[{type:"Toggle",label:"Enabled",value:this.settings.enable}]},init:function(){this.settings.enable&&(Ot(),kt())},onOptionsChange(e){return e.label!="Enabled"||e.type!="Toggle"?!1:(this.settings.enable=e.value,!0)},isEnabled(){return!0}});function Se(e,t){let o=(()=>{let i=localStorage.getItem(e);return i?{...t,...JSON.parse(i)}:{...t}})();return new Proxy(o,{get(i,r){return o[r]},set(i,r,s){return o[r]=s,localStorage.setItem(e,JSON.stringify(o)),!0},deleteProperty(i,r){return delete o[r],localStorage.setItem(e,JSON.stringify(o)),!0}})}var Me='.house-ad-wrapper #respawn-ad-two #respawn-ad-two #welcome-bundle-ui .welcome-bundle-ui { display: none !important; } img[src="img/eggstra-value-pack.webp"] { display: none !important; } .free-games-logo .vip-club-cta .free-games-title #chickenBadge { display: none !important; } .playerSlot--nam-score { border-radius: .5em; } .is-paused .pause-ui-element { left: 1em; } .is-paused .chat-item:first-child.chat-pinned-item { background-color: transparent !important; } .chat-container { background-color: rgba(0, 0, 0, 0.15) !important; border: 0.0625em solid rgba(0, 0, 0, 0.2) !important; box-shadow: 0 .25em .5em rgba(0, 0, 0, 0.2) !important; border-radius: 0.9375em !important; padding: 0.9375em !important; } .is-paused #chatIn { width: 100%; left: 1em; } .is-paused .chat-container { margin-left: unset; height: auto; } .is-paused #chatIn { position: unset; } .chat-wrapper .pause-ui-element { bottom: var(--ss-space-lg) !important ; background-color: transparent !important; border: none !important; width: 30% !important; height: auto !important; } .is-paused .pause-ui-element { bottom: var(--ss-space-lg); background-color: transparent; border: none; width: 30%; height: auto !important; } .addChatfiltered { color: red; }';async function Te(){await S(()=>m.readyState),m.thememanager.addStyle(Me,"legacy-gtweaks-css")}var Lt=[oe,X,ie,ge,he,ve,xe];function Dt(e){return Se(e.uniqueIdentifier,e.defaultSettings)}function At(e){try{return e.init(),!0}catch(t){return t}}function f(e){let t=Dt(e);return{...e,settings:t}}function Ie(){let e=performance.now();for(let i of Lt){let r=performance.now(),s=At(i),a={processed:s==!0,loadTime:performance.now()-r};if(Object.assign(a,i),m.addExtension(a),!(s instanceof Error)){h(`Extension Loaded: ${a.uniqueIdentifier}`);continue}y(`Loading: %c${a.uniqueIdentifier} - ${s.message}`,s)}let t=performance.now()-e,o=`Loaded %c${m.extensions.filter(i=>i.processed==!0).length}%c/%c${m.extensions.length}%c extensions in %c${t}%cms successfully`;h(o,u.number,"",u.number,"",u.number,""),m.readyState=!0,Te()}de();Ie();})();
